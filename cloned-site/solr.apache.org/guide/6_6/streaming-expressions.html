<!DOCTYPE html>

<!-- Mirrored from solr.apache.org/guide/6_6/streaming-expressions.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 26 Feb 2026 00:40:00 GMT -->
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">

<title>Streaming Expressions | Apache Solr Reference Guide 6.6</title>
<link rel="canonical" href="https://solr.apache.org/guide/solr/latest/query-guide/streaming-expressions.html">
<meta name="robots" content="noindex">
<link href="https://solr.apache.org/guide/6_6/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="https://solr.apache.org/guide/6_6/css/lavish-bootstrap.css">
<link rel="stylesheet" href="https://solr.apache.org/guide/6_6/css/customstyles.css">
<link rel="stylesheet" href="https://solr.apache.org/guide/6_6/css/theme-solr.css">
<link rel="stylesheet" href="https://solr.apache.org/guide/6_6/css/ref-guide.css">
<link rel="stylesheet" href="https://solr.apache.org/guide/6_6/css/comments.css">

<script src="https://solr.apache.org/guide/6_6/js/jquery-2.1.4.min.js"></script>
<script src="https://solr.apache.org/guide/6_6/js/jquery.cookie-1.4.1.min.js"></script>
<script src="https://solr.apache.org/guide/6_6/js/jquery.navgoco.min.js"></script>

<script src="https://solr.apache.org/guide/6_6/js/bootstrap-3.3.4.min.js"></script>
<script src="https://solr.apache.org/guide/6_6/js/anchor-2.0.0.min.js"></script>
<script src="https://solr.apache.org/guide/6_6/js/toc.js"></script>
<script src="https://solr.apache.org/guide/6_6/js/customscripts.js"></script>

<link rel="shortcut icon" href="https://solr.apache.org/guide/6_6/images/icons/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="js/html5shiv-3.7.0.js"></script>
<script src="js/respond-1.4.2.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="Apache Solr Reference Guide" href="https://home.apache.org/~ctargett/RefGuidePOC/jekyll-full/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // we do *NOT* want cookies used to save the current stage of the sidebar
                             // instead the code in sidebar.html will ensure that the current page
                             // (and it's ancestors) are "active" on page load
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
</head>
<body class="" id="streaming-expressions">
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            
            <a class="fa fa-home fa-lg navbar-brand" href="https://solr.apache.org/guide/6_6/index.html">&nbsp;<span class="projectTitle"> Solr Ref Guide 6.6</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- Link to Solr website -->
                <li><a href="https://lucene.apache.org/solr/" target="_blank">Solr Website</a></li>
                <!-- Other Guide Formats dropdown -->
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Other Formats<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                       <li><a href="https://www.apache.org/dyn/closer.cgi/lucene/solr/ref-guide" target="_blank">PDF for Latest Release</a></li>
                       <li><a href="https://archive.apache.org/dist/lucene/solr/ref-guide/" target="_blank">Archived PDFs</a></li>
                       <li><a href="https://lucene.apache.org/solr/guide/" target="_blank">Other Versions Online</a></li>
                    </ul>
                </li>
                <!-- Solr Resources dropdown -->
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Solr Resources<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                       <li><a href="https://lucene.apache.org/solr/6_6_0//solr-core/index.html" target="_blank">Solr Javadocs</a></li>
                       <li><a href="https://lucene.apache.org/solr/community.html#version-control" target="_blank">Lucene/Solr Source Code</a></li>
                       <li><a href="https://lucene.apache.org/solr/community.html" target="_blank">Solr Community Links</a></li>
                    </ul>
                </li>
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="https://solr.apache.org/guide/6_6/js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Streaming Expressions">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div class="col-lg-12">&nbsp;</div>
  <!-- Content Row -->
  <div class="row">
    <!-- Sidebar Column -->
    <div class="col-md-3">
      

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">Apache Solr Reference Guide</li>
  
  
  <li class="sb-level1">
    <a href="https://solr.apache.org/guide/6_6/about-this-guide.html">About This Guide</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="https://solr.apache.org/guide/6_6/getting-started.html">Getting Started</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/installing-solr.html">Installing Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/running-solr.html">Running Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/a-quick-overview.html">A Quick Overview</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/a-step-closer.html">A Step Closer</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/solr-control-script-reference.html">Solr Control Script Reference</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="https://solr.apache.org/guide/6_6/upgrading-solr.html">Upgrading Solr</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="https://solr.apache.org/guide/6_6/using-the-solr-administration-user-interface.html">Using the Solr Administration User Interface</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/overview-of-the-solr-admin-ui.html">Overview of the Solr Admin UI</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/getting-assistance.html">Getting Assistance</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/logging.html">Logging</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/cloud-screens.html">Cloud Screens</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/collections-core-admin.html">Collections / Core Admin</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/java-properties.html">Java Properties</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/thread-dump.html">Thread Dump</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/collection-specific-tools.html">Collection-Specific Tools</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/analysis-screen.html">Analysis Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/dataimport-screen.html">Dataimport Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/documents-screen.html">Documents Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/files-screen.html">Files Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/query-screen.html">Query Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/stream-screen.html">Stream Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/schema-browser-screen.html">Schema Browser Screen</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/core-specific-tools.html">Core-Specific Tools</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/ping.html">Ping</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/plugins-stats-screen.html">Plugins &amp; Stats Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/replication-screen.html">Replication Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/segments-info.html">Segments Info</a>
            
          </li>
          
        </ul>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="https://solr.apache.org/guide/6_6/documents-fields-and-schema-design.html">Documents, Fields, and Schema Design</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/overview-of-documents-fields-and-schema-design.html">Overview of Documents, Fields, and Schema Design</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/solr-field-types.html">Solr Field Types</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/field-type-definitions-and-properties.html">Field Type Definitions and Properties</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/field-types-included-with-solr.html">Field Types Included with Solr</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/working-with-currencies-and-exchange-rates.html">Working with Currencies and Exchange Rates</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/working-with-dates.html">Working with Dates</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/working-with-enum-fields.html">Working with Enum Fields</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/working-with-external-files-and-processes.html">Working with External Files and Processes</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/field-properties-by-use-case.html">Field Properties by Use Case</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/defining-fields.html">Defining Fields</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/copying-fields.html">Copying Fields</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/dynamic-fields.html">Dynamic Fields</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/other-schema-elements.html">Other Schema Elements</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/schema-api.html">Schema API</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/putting-the-pieces-together.html">Putting the Pieces Together</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/docvalues.html">DocValues</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/schemaless-mode.html">Schemaless Mode</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="https://solr.apache.org/guide/6_6/understanding-analyzers-tokenizers-and-filters.html">Understanding Analyzers, Tokenizers, and Filters</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/analyzers.html">Analyzers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/about-tokenizers.html">About Tokenizers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/about-filters.html">About Filters</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/tokenizers.html">Tokenizers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/filter-descriptions.html">Filter Descriptions</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/charfilterfactories.html">CharFilterFactories</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/language-analysis.html">Language Analysis</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/phonetic-matching.html">Phonetic Matching</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/running-your-analyzer.html">Running Your Analyzer</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="https://solr.apache.org/guide/6_6/indexing-and-basic-data-operations.html">Indexing and Basic Data Operations</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/introduction-to-solr-indexing.html">Introduction to Solr Indexing</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/post-tool.html">Post Tool</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/uploading-data-with-index-handlers.html">Uploading Data with Index Handlers</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/transforming-and-indexing-custom-json.html">Transforming and Indexing Custom JSON</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/uploading-data-with-solr-cell-using-apache-tika.html">Uploading Data with Solr Cell using Apache Tika</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/uploading-structured-data-store-data-with-the-data-import-handler.html">Uploading Structured Data Store Data with the Data Import Handler</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/updating-parts-of-documents.html">Updating Parts of Documents</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/detecting-languages-during-indexing.html">Detecting Languages During Indexing</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/de-duplication.html">De-Duplication</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/content-streams.html">Content Streams</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/uima-integration.html">UIMA Integration</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="https://solr.apache.org/guide/6_6/searching.html">Searching</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/overview-of-searching-in-solr.html">Overview of Searching in Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/velocity-search-ui.html">Velocity Search UI</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/relevance.html">Relevance</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/query-syntax-and-parsing.html">Query Syntax and Parsing</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/common-query-parameters.html">Common Query Parameters</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/the-standard-query-parser.html">The Standard Query Parser</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/the-dismax-query-parser.html">The DisMax Query Parser</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/the-extended-dismax-query-parser.html">The Extended DisMax Query Parser</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/function-queries.html">Function Queries</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/local-parameters-in-queries.html">Local Parameters in Queries</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/other-parsers.html">Other Parsers</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/faceting.html">Faceting</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/blockjoin-faceting.html">BlockJoin Faceting</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/highlighting.html">Highlighting</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/spell-checking.html">Spell Checking</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/query-re-ranking.html">Query Re-Ranking</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/learning-to-rank.html">Learning To Rank</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/transforming-result-documents.html">Transforming Result Documents</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/suggester.html">Suggester</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/morelikethis.html">MoreLikeThis</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/pagination-of-results.html">Pagination of Results</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/collapse-and-expand-results.html">Collapse and Expand Results</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/result-grouping.html">Result Grouping</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/result-clustering.html">Result Clustering</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/spatial-search.html">Spatial Search</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/the-terms-component.html">The Terms Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/the-term-vector-component.html">The Term Vector Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/the-stats-component.html">The Stats Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/the-query-elevation-component.html">The Query Elevation Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/response-writers.html">Response Writers</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/velocity-response-writer.html">Velocity Response Writer</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/near-real-time-searching.html">Near Real Time Searching</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/realtime-get.html">RealTime Get</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/exporting-result-sets.html">Exporting Result Sets</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/streaming-expressions.html">Streaming Expressions</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/stream-sources.html">Stream Source Reference</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/stream-decorators.html">Stream Decorator Reference</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/stream-evaluators.html">Stream Evaluator Reference</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/graph-traversal.html">Graph Traversal</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/parallel-sql-interface.html">Parallel SQL Interface</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/solr-jdbc-dbvisualizer.html">Solr JDBC - DbVisualizer</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/solr-jdbc-squirrel-sql.html">Solr JDBC - SQuirreL SQL</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/solr-jdbc-apache-zeppelin.html">Solr JDBC - Apache Zeppelin</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/solr-jdbc-python-jython.html">Solr JDBC - Python/Jython</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/solr-jdbc-r.html">Solr JDBC - R</a>
            
          </li>
          
        </ul>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="https://solr.apache.org/guide/6_6/the-well-configured-solr-instance.html">The Well-Configured Solr Instance</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/configuring-solrconfig-xml.html">Configuring solrconfig.xml</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/datadir-and-directoryfactory-in-solrconfig.html">DataDir and DirectoryFactory in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/lib-directives-in-solrconfig.html">Lib Directives in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/schema-factory-definition-in-solrconfig.html">Schema Factory Definition in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/indexconfig-in-solrconfig.html">IndexConfig in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/requesthandlers-and-searchcomponents-in-solrconfig.html">RequestHandlers and SearchComponents in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/initparams-in-solrconfig.html">InitParams in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/updatehandlers-in-solrconfig.html">UpdateHandlers in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/query-settings-in-solrconfig.html">Query Settings in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/requestdispatcher-in-solrconfig.html">RequestDispatcher in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/update-request-processors.html">Update Request Processors</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/codec-factory.html">Codec Factory</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/solr-cores-and-solr-xml.html">Solr Cores and solr.xml</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/format-of-solr-xml.html">Format of solr.xml</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/defining-core-properties.html">Defining core.properties</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/coreadmin-api.html">CoreAdmin API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/config-sets.html">Config Sets</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/configuration-apis.html">Configuration APIs</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/blob-store-api.html">Blob Store API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/config-api.html">Config API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/request-parameters-api.html">Request Parameters API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/managed-resources.html">Managed Resources</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/implicit-requesthandlers.html">Implicit RequestHandlers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/solr-plugins.html">Solr Plugins</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/adding-custom-plugins-in-solrcloud-mode.html">Adding Custom Plugins in SolrCloud Mode</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/jvm-settings.html">JVM Settings</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="https://solr.apache.org/guide/6_6/managing-solr.html">Managing Solr</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/taking-solr-to-production.html">Taking Solr to Production</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/securing-solr.html">Securing Solr</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/authentication-and-authorization-plugins.html">Authentication and Authorization Plugins</a>
            
            <ul>
              
              <li class="sb-level4">
                <a href="https://solr.apache.org/guide/6_6/basic-authentication-plugin.html">Basic Authentication Plugin</a>
                
              </li>
              
              <li class="sb-level4">
                <a href="https://solr.apache.org/guide/6_6/hadoop-authentication-plugin.html">Hadoop Authentication Plugin</a>
                
              </li>
              
              <li class="sb-level4">
                <a href="https://solr.apache.org/guide/6_6/kerberos-authentication-plugin.html">Kerberos Authentication Plugin</a>
                
              </li>
              
              <li class="sb-level4">
                <a href="https://solr.apache.org/guide/6_6/rule-based-authorization-plugin.html">Rule-Based Authorization Plugin</a>
                
              </li>
              
            </ul>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/enabling-ssl.html">Enabling SSL</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/running-solr-on-hdfs.html">Running Solr on HDFS</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/making-and-restoring-backups.html">Making and Restoring Backups</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/configuring-logging.html">Configuring Logging</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/using-jmx-with-solr.html">Using JMX with Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/mbean-request-handler.html">MBean Request Handler</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/performance-statistics-reference.html">Performance Statistics Reference</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/metrics-reporting.html">Metrics Reporting</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/v2-api.html">v2 API</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="https://solr.apache.org/guide/6_6/solrcloud.html">SolrCloud</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/getting-started-with-solrcloud.html">Getting Started with SolrCloud</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/how-solrcloud-works.html">How SolrCloud Works</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/shards-and-indexing-data-in-solrcloud.html">Shards and Indexing Data in SolrCloud</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/distributed-requests.html">Distributed Requests</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/read-and-write-side-fault-tolerance.html">Read and Write Side Fault Tolerance</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/solrcloud-configuration-and-parameters.html">SolrCloud Configuration and Parameters</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/setting-up-an-external-zookeeper-ensemble.html">Setting Up an External ZooKeeper Ensemble</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/using-zookeeper-to-manage-configuration-files.html">Using ZooKeeper to Manage Configuration Files</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/zookeeper-access-control.html">ZooKeeper Access Control</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/collections-api.html">Collections API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/parameter-reference.html">Parameter Reference</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/command-line-utilities.html">Command Line Utilities</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/solrcloud-with-legacy-configuration-files.html">SolrCloud with Legacy Configuration Files</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="https://solr.apache.org/guide/6_6/configsets-api.html">ConfigSets API</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/rule-based-replica-placement.html">Rule-based Replica Placement</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/cross-data-center-replication-cdcr.html">Cross Data Center Replication (CDCR)</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="https://solr.apache.org/guide/6_6/legacy-scaling-and-distribution.html">Legacy Scaling and Distribution</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/introduction-to-scaling-and-distribution.html">Introduction to Scaling and Distribution</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/distributed-search-with-index-sharding.html">Distributed Search with Index Sharding</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/index-replication.html">Index Replication</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/combining-distribution-and-replication.html">Combining Distribution and Replication</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/merging-indexes.html">Merging Indexes</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="https://solr.apache.org/guide/6_6/client-apis.html">Client APIs</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/introduction-to-client-apis.html">Introduction to Client APIs</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/choosing-an-output-format.html">Choosing an Output Format</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/client-api-lineup.html">Client API Lineup</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/using-javascript.html">Using JavaScript</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/using-python.html">Using Python</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/using-solrj.html">Using SolrJ</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/using-solr-from-ruby.html">Using Solr From Ruby</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="https://solr.apache.org/guide/6_6/major-changes-from-solr-5-to-solr-6.html">Major Changes from Solr 5 to Solr 6</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="https://solr.apache.org/guide/6_6/upgrading-a-solr-cluster.html">Upgrading a Solr Cluster</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="https://solr.apache.org/guide/6_6/indexupgrader-tool.html">IndexUpgrader Tool</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="https://solr.apache.org/guide/6_6/further-assistance.html">Further Assistance</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="https://solr.apache.org/guide/6_6/solr-glossary.html">Solr Glossary</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="https://solr.apache.org/guide/6_6/errata.html">Errata</a>
    
  </li>
  
</ul>


<!-- set the 'active' class on the current page and ancestors -->
<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("#mysidebar a[href='streaming-expressions.html']").parents('li').toggleClass("active", true);</script>
<!-- set the 'current' class on the current page and 'current-tree' on the current page + it's ancestors -->
<!-- this can let us do css highlighting of the current page in the sidebar even if/when the user clicks around in the sidebar causing other sidebar elements to be 'active' -->
<script>
  $("#mysidebar a[href='streaming-expressions.html']").parent('li').toggleClass("current", true);
  $("#mysidebar a[href='streaming-expressions.html']").parents('li').toggleClass("current-tree", true);
</script>

    </div>
    <!-- Content Column -->
    <div class="col-md-9">
      <div class="post-header">
   <h1 class="post-title-main">Streaming Expressions</h1>
</div>

<!-- This adds a workflow map, to a page
     See http://idratherbewriting.com/documentation-theme-jekyll/mydoc_workflow_maps.html
     Leaving it here commented out in case we want to implement this in the future
 -->

<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->

<script src="https://solr.apache.org/guide/6_6/js/ref-guide-toc.js" type="text/javascript"></script>
<script type="text/javascript">
  // based on page variables, build up the list of headers for the top level toc (and any sub-section tocs)
  do_tocs(2)
</script>
<div id="toc" class="toc toc-normal"></div>

    

<div class="main-content">
  <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Streaming Expressions provide a simple yet powerful stream processing language for Solr Cloud.</p>
</div>
<div class="paragraph">
<p>Streaming expressions are a suite of functions that can be combined to perform many different parallel computing tasks. These functions are the basis for the <a href="https://solr.apache.org/guide/6_6/parallel-sql-interface.html#parallel-sql-interface">Parallel SQL Interface</a>.</p>
</div>
<div class="paragraph">
<p>There is a growing library of functions that can be combined to implement:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Request/response stream processing</p>
</li>
<li>
<p>Batch stream processing</p>
</li>
<li>
<p>Fast interactive MapReduce</p>
</li>
<li>
<p>Aggregations (Both pushed down faceted and shuffling MapReduce)</p>
</li>
<li>
<p>Parallel relational algebra (distributed joins, intersections, unions, complements)</p>
</li>
<li>
<p>Publish/subscribe messaging</p>
</li>
<li>
<p>Distributed graph traversal</p>
</li>
<li>
<p>Machine learning and parallel iterative model training</p>
</li>
<li>
<p>Anomaly detection</p>
</li>
<li>
<p>Recommendation systems</p>
</li>
<li>
<p>Retrieve and rank services</p>
</li>
<li>
<p>Text classification and feature extraction</p>
</li>
<li>
<p>Streaming NLP</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Streams from outside systems can be joined with streams originating from Solr and users can add their own stream functions by following Solr&#8217;s <a href="https://lucene.apache.org/solr/6_6_0//solr-solrj/org/apache/solr/client/solrj/io/stream/package-summary.html">Java streaming API</a>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Both streaming expressions and the streaming API are considered experimental, and the APIs are subject to change.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="StreamingExpressions-StreamLanguageBasics">Stream Language Basics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Streaming Expressions are comprised of streaming functions which work with a Solr collection. They emit a stream of tuples (key/value Maps).</p>
</div>
<div class="paragraph">
<p>Many of the provided streaming functions are designed to work with entire result sets rather then the top N results like normal search. This is supported by the <a href="https://solr.apache.org/guide/6_6/exporting-result-sets.html#exporting-result-sets">/export handler</a>.</p>
</div>
<div class="paragraph">
<p>Some streaming functions act as stream sources to originate the stream flow. Other streaming functions act as stream decorators to wrap other stream functions and perform operations on the stream of tuples. Many streams functions can be parallelized across a worker collection. This can be particularly powerful for relational algebra functions.</p>
</div>
<div class="sect2">
<h3 id="StreamingExpressions-StreamingRequestsandResponses">Streaming Requests and Responses</h3>
<div class="paragraph">
<p>Solr has a <code>/stream</code> request handler that takes streaming expression requests and returns the tuples as a JSON stream. This request handler is implicitly defined, meaning there is nothing that has to be defined in <code>solrconfig.xml</code> - see <a href="https://solr.apache.org/guide/6_6/implicit-requesthandlers.html#implicit-requesthandlers">Implicit RequestHandlers</a>.</p>
</div>
<div class="paragraph">
<p>The <code>/stream</code> request handler takes one parameter, <code>expr</code>, which is used to specify the streaming expression. For example, this curl command encodes and POSTs a simple <code>search()</code> expression to the <code>/stream</code> handler:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">curl --data-urlencode <span style="color: #BA2121">&#39;expr=search(enron_emails,</span>
<span style="color: #BA2121">                                   q=&quot;from:1800flowers*&quot;,</span>
<span style="color: #BA2121">                                   fl=&quot;from, to&quot;,</span>
<span style="color: #BA2121">                                   sort=&quot;from asc&quot;,</span>
<span style="color: #BA2121">                                   qt=&quot;/export&quot;)&#39;</span> http://localhost:8983/solr/enron_emails/stream</code></pre>
</div>
</div>
<div class="paragraph">
<p>Details of the parameters for each function are included below.</p>
</div>
<div class="paragraph">
<p>For the above example the <code>/stream</code> handler responded with the following JSON response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{<span style="color: #008000; font-weight: bold">&quot;result-set&quot;</span>:{<span style="color: #008000; font-weight: bold">&quot;docs&quot;</span>:[
   {<span style="color: #008000; font-weight: bold">&quot;from&quot;</span>:<span style="color: #BA2121">&quot;1800flowers.133139412@s2u2.com&quot;</span>,<span style="color: #008000; font-weight: bold">&quot;to&quot;</span>:<span style="color: #BA2121">&quot;lcampbel@enron.com&quot;</span>},
   {<span style="color: #008000; font-weight: bold">&quot;from&quot;</span>:<span style="color: #BA2121">&quot;1800flowers.93690065@s2u2.com&quot;</span>,<span style="color: #008000; font-weight: bold">&quot;to&quot;</span>:<span style="color: #BA2121">&quot;jtholt@ect.enron.com&quot;</span>},
   {<span style="color: #008000; font-weight: bold">&quot;from&quot;</span>:<span style="color: #BA2121">&quot;1800flowers.96749439@s2u2.com&quot;</span>,<span style="color: #008000; font-weight: bold">&quot;to&quot;</span>:<span style="color: #BA2121">&quot;alewis@enron.com&quot;</span>},
   {<span style="color: #008000; font-weight: bold">&quot;from&quot;</span>:<span style="color: #BA2121">&quot;1800flowers@1800flowers.flonetwork.com&quot;</span>,<span style="color: #008000; font-weight: bold">&quot;to&quot;</span>:<span style="color: #BA2121">&quot;lcampbel@enron.com&quot;</span>},
   {<span style="color: #008000; font-weight: bold">&quot;from&quot;</span>:<span style="color: #BA2121">&quot;1800flowers@1800flowers.flonetwork.com&quot;</span>,<span style="color: #008000; font-weight: bold">&quot;to&quot;</span>:<span style="color: #BA2121">&quot;lcampbel@enron.com&quot;</span>},
   {<span style="color: #008000; font-weight: bold">&quot;from&quot;</span>:<span style="color: #BA2121">&quot;1800flowers@1800flowers.flonetwork.com&quot;</span>,<span style="color: #008000; font-weight: bold">&quot;to&quot;</span>:<span style="color: #BA2121">&quot;lcampbel@enron.com&quot;</span>},
   {<span style="color: #008000; font-weight: bold">&quot;from&quot;</span>:<span style="color: #BA2121">&quot;1800flowers@1800flowers.flonetwork.com&quot;</span>,<span style="color: #008000; font-weight: bold">&quot;to&quot;</span>:<span style="color: #BA2121">&quot;lcampbel@enron.com&quot;</span>},
   {<span style="color: #008000; font-weight: bold">&quot;from&quot;</span>:<span style="color: #BA2121">&quot;1800flowers@1800flowers.flonetwork.com&quot;</span>,<span style="color: #008000; font-weight: bold">&quot;to&quot;</span>:<span style="color: #BA2121">&quot;lcampbel@enron.com&quot;</span>},
   {<span style="color: #008000; font-weight: bold">&quot;from&quot;</span>:<span style="color: #BA2121">&quot;1800flowers@shop2u.com&quot;</span>,<span style="color: #008000; font-weight: bold">&quot;to&quot;</span>:<span style="color: #BA2121">&quot;ebass@enron.com&quot;</span>},
   {<span style="color: #008000; font-weight: bold">&quot;from&quot;</span>:<span style="color: #BA2121">&quot;1800flowers@shop2u.com&quot;</span>,<span style="color: #008000; font-weight: bold">&quot;to&quot;</span>:<span style="color: #BA2121">&quot;lcampbel@enron.com&quot;</span>},
   {<span style="color: #008000; font-weight: bold">&quot;from&quot;</span>:<span style="color: #BA2121">&quot;1800flowers@shop2u.com&quot;</span>,<span style="color: #008000; font-weight: bold">&quot;to&quot;</span>:<span style="color: #BA2121">&quot;lcampbel@enron.com&quot;</span>},
   {<span style="color: #008000; font-weight: bold">&quot;from&quot;</span>:<span style="color: #BA2121">&quot;1800flowers@shop2u.com&quot;</span>,<span style="color: #008000; font-weight: bold">&quot;to&quot;</span>:<span style="color: #BA2121">&quot;lcampbel@enron.com&quot;</span>},
   {<span style="color: #008000; font-weight: bold">&quot;from&quot;</span>:<span style="color: #BA2121">&quot;1800flowers@shop2u.com&quot;</span>,<span style="color: #008000; font-weight: bold">&quot;to&quot;</span>:<span style="color: #BA2121">&quot;ebass@enron.com&quot;</span>},
   {<span style="color: #008000; font-weight: bold">&quot;from&quot;</span>:<span style="color: #BA2121">&quot;1800flowers@shop2u.com&quot;</span>,<span style="color: #008000; font-weight: bold">&quot;to&quot;</span>:<span style="color: #BA2121">&quot;ebass@enron.com&quot;</span>},
   {<span style="color: #008000; font-weight: bold">&quot;EOF&quot;</span>:<span style="color: #008000; font-weight: bold">true</span>,<span style="color: #008000; font-weight: bold">&quot;RESPONSE_TIME&quot;</span>:<span style="color: #666666">33</span>}]}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note the last tuple in the above example stream is <code>{"EOF":true,"RESPONSE_TIME":33}</code>. The <code>EOF</code> indicates the end of the stream. To process the JSON response, you&#8217;ll need to use a streaming JSON implementation because streaming expressions are designed to return the entire result set which may have millions of records. In your JSON client you&#8217;ll need to iterate each doc (tuple) and check for the EOF tuple to determine the end of stream.</p>
</div>
<div class="paragraph">
<p>The <a href="https://lucene.apache.org/solr/6_6_0//solr-solrj/org/apache/solr/client/solrj/io/package-summary.html"><code>org.apache.solr.client.solrj.io</code></a> package provides Java classes that compile streaming expressions into streaming API objects. These classes can be used to execute streaming expressions from inside a Java application. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">StreamFactory streamFactory <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">new</span> StreamFactory<span style="color: #666666">().</span><span style="color: #7D9029">withCollectionZkHost</span><span style="color: #666666">(</span><span style="color: #BA2121">&quot;collection1&quot;</span><span style="color: #666666">,</span> zkServer<span style="color: #666666">.</span><span style="color: #7D9029">getZkAddress</span><span style="color: #666666">())</span>
    <span style="color: #666666">.</span><span style="color: #7D9029">withStreamFunction</span><span style="color: #666666">(</span><span style="color: #BA2121">&quot;search&quot;</span><span style="color: #666666">,</span> CloudSolrStream<span style="color: #666666">.</span><span style="color: #7D9029">class</span><span style="color: #666666">)</span>
    <span style="color: #666666">.</span><span style="color: #7D9029">withStreamFunction</span><span style="color: #666666">(</span><span style="color: #BA2121">&quot;unique&quot;</span><span style="color: #666666">,</span> UniqueStream<span style="color: #666666">.</span><span style="color: #7D9029">class</span><span style="color: #666666">)</span>
    <span style="color: #666666">.</span><span style="color: #7D9029">withStreamFunction</span><span style="color: #666666">(</span><span style="color: #BA2121">&quot;top&quot;</span><span style="color: #666666">,</span> RankStream<span style="color: #666666">.</span><span style="color: #7D9029">class</span><span style="color: #666666">)</span>
    <span style="color: #666666">.</span><span style="color: #7D9029">withStreamFunction</span><span style="color: #666666">(</span><span style="color: #BA2121">&quot;group&quot;</span><span style="color: #666666">,</span> ReducerStream<span style="color: #666666">.</span><span style="color: #7D9029">class</span><span style="color: #666666">)</span>
    <span style="color: #666666">.</span><span style="color: #7D9029">withStreamFunction</span><span style="color: #666666">(</span><span style="color: #BA2121">&quot;parallel&quot;</span><span style="color: #666666">,</span> ParallelStream<span style="color: #666666">.</span><span style="color: #7D9029">class</span><span style="color: #666666">);</span>

ParallelStream pstream <span style="color: #666666">=</span> <span style="color: #666666">(</span>ParallelStream<span style="color: #666666">)</span>streamFactory<span style="color: #666666">.</span><span style="color: #7D9029">constructStream</span><span style="color: #666666">(</span><span style="color: #BA2121">&quot;parallel(collection1, group(search(collection1, q=\&quot;*:*\&quot;, fl=\&quot;id,a_s,a_i,a_f\&quot;, sort=\&quot;a_s asc,a_f asc\&quot;, partitionKeys=\&quot;a_s\&quot;), by=\&quot;a_s asc\&quot;), workers=\&quot;2\&quot;, zkHost=\&quot;&quot;</span><span style="color: #666666">+</span>zkHost<span style="color: #666666">+</span><span style="color: #BA2121">&quot;\&quot;, sort=\&quot;a_s asc\&quot;)&quot;</span><span style="color: #666666">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="StreamingExpressions-DataRequirements">Data Requirements</h3>
<div class="paragraph">
<p>Because streaming expressions relies on the <code>/export</code> handler, many of the field and field type requirements to use <code>/export</code> are also requirements for <code>/stream</code>, particularly for <code>sort</code> and <code>fl</code> parameters. Please see the section <a href="https://solr.apache.org/guide/6_6/exporting-result-sets.html#exporting-result-sets">Exporting Result Sets</a> for details.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="types-of-streaming-expressions">Types of Streaming Expressions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="about-stream-sources">About Stream Sources</h3>
<div class="paragraph">
<p>Stream sources originate streams. The most commonly used one of these is <code>search</code>, which does a query.</p>
</div>
<div class="paragraph">
<p>A full reference to all available source expressions is available in <a href="https://solr.apache.org/guide/6_6/stream-sources.html#stream-sources">Stream Sources</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="about-stream-decorators">About Stream Decorators</h3>
<div class="paragraph">
<p>Stream decorators wrap other stream functions or perform operations on a stream.</p>
</div>
<div class="paragraph">
<p>A full reference to all available decorator expressions is available in <a href="https://solr.apache.org/guide/6_6/stream-decorators.html#stream-decorators">Stream Decorators</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="about-stream-evaluators">About Stream Evaluators</h3>
<div class="paragraph">
<p>Stream Evaluators can be used to evaluate (calculate) new values based on other values in a tuple. That newly evaluated value can be put into the tuple (as part of a <code>select(&#8230;&#8203;)</code> clause), used to filter streams (as part of a <code>having(&#8230;&#8203;)</code> clause), and for other things. Evaluators can contain field names, raw values, or other evaluators, giving you the ability to create complex evaluation logic, including conditional if/then choices.</p>
</div>
<div class="paragraph">
<p>In cases where you want to use raw values as part of an evaluation you will need to consider the order of how evaluators are parsed.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If the parameter can be parsed into a valid number, then it is considered a number. For example, <code>add(3,4.5)</code></p>
</li>
<li>
<p>If the parameter can be parsed into a valid boolean, then it is considered a boolean. For example, <code>eq(true,false)</code></p>
</li>
<li>
<p>If the parameter can be parsed into a valid evaluator, then it is considered an evaluator. For example, <code>eq(add(10,4),add(7,7))</code></p>
</li>
<li>
<p>The parameter is considered a field name, even if it quoted. For example, <code>eq(fieldA,"fieldB")</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If you wish to use a raw string as part of an evaluation, you will want to consider using the <code>raw(string)</code> evaluator. This will always return the raw value, no matter what is entered.</p>
</div>
<div class="paragraph">
<p>A full reference to all available evaluator expressions is available in <a href="https://solr.apache.org/guide/6_6/stream-evaluators.html#stream-evaluators">Stream Evaluators</a>.</p>
</div>
</div>
</div>
</div>
</div>

<!-- Adds tags, if any -->
    <div class="tags">
        
    </div>

<!-- Adds nav links on each page -->
    
    
    <div class="scrollnav">
      
      <a class="btn btn-primary prev" href="https://solr.apache.org/guide/6_6/exporting-result-sets.html">Exporting Result Sets</a>
      
      
      <a class="btn btn-primary next" href="https://solr.apache.org/guide/6_6/stream-sources.html">Stream Source Reference</a>
      
    </div>
    

</div>

<!-- Adds comments from Apache's Comment system -->

<div id="comments_thread">
</div>
<script type="text/javascript" src="https://comments.apache.org/show_comments.lua?site=solr-refguide&amp;style=css/comments.css&amp;page=streaming-expressions" async="true">
</script>
<noscript>
<iframe width="100%" height="500" src="https://comments.apache.org/iframe.lua?site=solr-refguide&amp;style=css/comments.css&amp;page=streaming-expressions"></iframe>
</noscript>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2017 Apache Software Foundation. All rights reserved. <br />
 Site Version: 6.6 <br />Site last generated: 2017-06-09 <br />
<p><img src="https://solr.apache.org/guide/6_6/images/solr-sunOnly-small.png" alt="Apache Solr"/></p>
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
  </div>
  <!-- /.container -->
</div>

</body>

<!-- Mirrored from solr.apache.org/guide/6_6/streaming-expressions.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 26 Feb 2026 00:40:00 GMT -->
</html>
