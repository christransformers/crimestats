var CompositeSearch=function(){"use strict";function e(){}const t=e=>e;function n(e){return e()}function o(){return Object.create(null)}function i(e){e.forEach(n)}function r(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(t,n,o){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function a(e,t,n=t){return e.set(n),t}const c="undefined"!=typeof window;let d=c?()=>window.performance.now():()=>Date.now(),u=c?e=>requestAnimationFrame(e):e;const f=new Set;function p(e){f.forEach((t=>{t.c(e)||(f.delete(t),t.f())})),0!==f.size&&u(p)}function h(e,t){e.appendChild(t)}function g(e,t,n){e.insertBefore(t,n||null)}function m(e){e.parentNode.removeChild(e)}function v(e){return document.createElement(e)}function y(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function $(e){return document.createTextNode(e)}function w(){return $(" ")}function b(){return $("")}function x(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function E(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function k(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function D(e,t){e.value=null==t?"":t}function L(e,t,n){e.classList[n?"add":"remove"](t)}class A{constructor(e=null){this.a=e,this.e=this.n=null}m(e,t,n=null){this.e||(this.e=v(t.nodeName),this.t=t,this.h(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)g(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(m)}}const O=new Set;let _,T=0;function C(e,t){const n=(e.style.animation||"").split(", "),o=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),i=n.length-o.length;i&&(e.style.animation=o.join(", "),T-=i,T||u((()=>{T||(O.forEach((e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}})),O.clear())})))}function S(n,o,i,r){if(!o)return e;const s=n.getBoundingClientRect();if(o.left===s.left&&o.right===s.right&&o.top===s.top&&o.bottom===s.bottom)return e;const{delay:l=0,duration:a=300,easing:c=t,start:h=d()+l,end:g=h+a,tick:m=e,css:y}=i(n,{from:o,to:s},r);let $,w=!0,b=!1;function x(){y&&C(n,$),w=!1}return function(e){let t;0===f.size&&u(p),new Promise((n=>{f.add(t={c:e,f:n})}))}((e=>{if(!b&&e>=h&&(b=!0),b&&e>=g&&(m(1,0),x()),!w)return!1;if(b){const t=0+1*c((e-h)/a);m(t,1-t)}return!0})),y&&($=function(e,t,n,o,i,r,s,l=0){const a=16.666/o;let c="{\n";for(let e=0;e<=1;e+=a){const o=t+(n-t)*r(e);c+=100*e+`%{${s(o,1-o)}}\n`}const d=c+`100% {${s(n,1-n)}}\n}`,u=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(d)}_${l}`,f=e.ownerDocument;O.add(f);const p=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(v("style")).sheet),h=f.__svelte_rules||(f.__svelte_rules={});h[u]||(h[u]=!0,p.insertRule(`@keyframes ${u} ${d}`,p.cssRules.length));const g=e.style.animation||"";return e.style.animation=`${g?`${g}, `:""}${u} ${o}ms linear ${i}ms 1 both`,T+=1,u}(n,0,1,a,l,c,y)),l||(b=!0),m(0,1),x}function M(e){const t=getComputedStyle(e);if("absolute"!==t.position&&"fixed"!==t.position){const{width:n,height:o}=t,i=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=o,function(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const o=getComputedStyle(e),i="none"===o.transform?"":o.transform;e.style.transform=`${i} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}(e,i)}}function j(e){_=e}function N(){const e=function(){if(!_)throw new Error("Function called outside component initialization");return _}();return(t,n)=>{const o=e.$$.callbacks[t];if(o){const i=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);o.slice().forEach((t=>{t.call(e,i)}))}}}const W=[],B=[],I=[],F=[],P=Promise.resolve();let R=!1;function z(){R||(R=!0,P.then(X))}function q(e){I.push(e)}function H(e){F.push(e)}let Z=!1;const V=new Set;function X(){if(!Z){Z=!0;do{for(let e=0;e<W.length;e+=1){const t=W[e];j(t),U(t.$$)}for(j(null),W.length=0;B.length;)B.pop()();for(let e=0;e<I.length;e+=1){const t=I[e];V.has(t)||(V.add(t),t())}I.length=0}while(W.length);for(;F.length;)F.pop()();R=!1,Z=!1,V.clear()}}function U(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(q)}}const Y=new Set;let G;function J(){G={r:0,c:[],p:G}}function K(){G.r||i(G.c),G=G.p}function Q(e,t){e&&e.i&&(Y.delete(e),e.i(t))}function ee(e,t,n,o){if(e&&e.o){if(Y.has(e))return;Y.add(e),G.c.push((()=>{Y.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}}function te(e,t){e.d(1),t.delete(e.key)}function ne(e,t){e.f(),function(e,t){ee(e,1,1,(()=>{t.delete(e.key)}))}(e,t)}function oe(e,t,n,o,i,r,s,l,a,c,d,u){let f=e.length,p=r.length,h=f;const g={};for(;h--;)g[e[h].key]=h;const m=[],v=new Map,y=new Map;for(h=p;h--;){const e=u(i,r,h),l=n(e);let a=s.get(l);a?o&&a.p(e,t):(a=c(l,e),a.c()),v.set(l,m[h]=a),l in g&&y.set(l,Math.abs(h-g[l]))}const $=new Set,w=new Set;function b(e){Q(e,1),e.m(l,d),s.set(e.key,e),d=e.first,p--}for(;f&&p;){const t=m[p-1],n=e[f-1],o=t.key,i=n.key;t===n?(d=t.first,f--,p--):v.has(i)?!s.has(o)||$.has(o)?b(t):w.has(i)?f--:y.get(o)>y.get(i)?(w.add(o),b(t)):($.add(i),f--):(a(n,s),f--)}for(;f--;){const t=e[f];v.has(t.key)||a(t,s)}for(;p;)b(m[p-1]);return m}function ie(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function re(e){e&&e.c()}function se(e,t,o,s){const{fragment:l,on_mount:a,on_destroy:c,after_update:d}=e.$$;l&&l.m(t,o),s||q((()=>{const t=a.map(n).filter(r);c?c.push(...t):i(t),e.$$.on_mount=[]})),d.forEach(q)}function le(e,t){const n=e.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ae(t,n,r,s,l,a,c=[-1]){const d=_;j(t);const u=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:l,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:n.context||[]),callbacks:o(),dirty:c,skip_bound:!1};let f=!1;if(u.ctx=r?r(t,n.props||{},((e,n,...o)=>{const i=o.length?o[0]:n;return u.ctx&&l(u.ctx[e],u.ctx[e]=i)&&(!u.skip_bound&&u.bound[e]&&u.bound[e](i),f&&function(e,t){-1===e.$$.dirty[0]&&(W.push(e),z(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],u.update(),f=!0,i(u.before_update),u.fragment=!!s&&s(u.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);u.fragment&&u.fragment.l(e),e.forEach(m)}else u.fragment&&u.fragment.c();n.intro&&Q(t.$$.fragment),se(t,n.target,n.anchor,n.customElement),X()}j(d)}class ce{$destroy(){le(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const de=[];function ue(t,n=e){let o;const i=[];function r(e){if(s(t,e)&&(t=e,o)){const e=!de.length;for(let e=0;e<i.length;e+=1){const n=i[e];n[1](),de.push(n,t)}if(e){for(let e=0;e<de.length;e+=2)de[e][0](de[e+1]);de.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(s,l=e){const a=[s,l];return i.push(a),1===i.length&&(o=n(r)||e),s(t),()=>{const e=i.indexOf(a);-1!==e&&i.splice(e,1),0===i.length&&(o(),o=null)}}}}class fe{static setDefinitions(e,t){this.definitions={};const n=t.length?t:Object.keys(e);this.default=n[0];for(let t of n)this.definitions[t]=e[t],e[t].default&&(this.default=t)}}fe.definitions={};const pe=function(e=!1){const{subscribe:t,set:n,update:o}=ue(e);return{subscribe:t,set:n,enable:()=>n(!0),disable:()=>n(!1),toggle:()=>o((e=>!e))}}(),he=function(e=[]){const{subscribe:t,set:n,update:o}=ue(e);let i=0;return{subscribe:t,set:e=>n(e.map((e=>e.id?e:Object.assign({id:++i},e)))),addDefault:function(){this.add({type:fe.default,value:null})},add:e=>o((t=>[...t,Object.assign({id:++i},e)])),remove:e=>o((t=>[...t.slice(0,e),...t.slice(e+1)]))}}(),ge=ue("");var me=Object.freeze({__proto__:null,state:pe,formData:he,prefix:ge});function ve(e,t,n){e.dispatchEvent(new CustomEvent("finalize",{detail:{items:t,info:n}}))}function ye(e,t,n){e.dispatchEvent(new CustomEvent("consider",{detail:{items:t,info:n}}))}const $e="draggedEntered",we="draggedLeft",be="draggedOverIndex",xe="draggedLeftDocument",Ee="leftForAnother",ke="outsideOfAny";function De(e,t,n){e.dispatchEvent(new CustomEvent($e,{detail:{indexObj:t,draggedEl:n}}))}function Le(e,t,n){e.dispatchEvent(new CustomEvent(we,{detail:{draggedEl:t,type:Ee,theOtherDz:n}}))}function Ae(e,t,n){e.dispatchEvent(new CustomEvent(be,{detail:{indexObj:t,draggedEl:n}}))}const Oe="dragStarted",_e=$e,Te="dragEnteredAnother",Ce=be,Se=we,Me="draggedLeftAll",je="droppedIntoZone",Ne="droppedIntoAnother",We="droppedOutsideOfAny",Be="dragStopped",Ie="pointer",Fe="keyboard",Pe="isDndShadowItem",Re="data-is-dnd-shadow-item",ze="id:dnd-shadow-placeholder-0000";let qe="id",He=0;function Ze(){He++}function Ve(){if(0===He)throw new Error("Bug! trying to decrement when there are no dropzones");He--}const Xe="undefined"==typeof window;function Ue(e){let t;const n=e.getBoundingClientRect(),o=getComputedStyle(e),i=o.transform;if(i){let r,s,l,a;if(i.startsWith("matrix3d("))t=i.slice(9,-1).split(/, /),r=+t[0],s=+t[5],l=+t[12],a=+t[13];else{if(!i.startsWith("matrix("))return n;t=i.slice(7,-1).split(/, /),r=+t[0],s=+t[3],l=+t[4],a=+t[5]}const c=o.transformOrigin,d=n.x-l-(1-r)*parseFloat(c),u=n.y-a-(1-s)*parseFloat(c.slice(c.indexOf(" ")+1)),f=r?n.width/r:e.offsetWidth,p=s?n.height/s:e.offsetHeight;return{x:d,y:u,width:f,height:p,top:u,right:d+f,bottom:u+p,left:d}}return n}function Ye(e){const t=Ue(e);return{top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX}}function Ge(e){const t=e.getBoundingClientRect();return{top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX}}function Je(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function Ke(e,t){return e.y<=t.bottom&&e.y>=t.top&&e.x>=t.left&&e.x<=t.right}function Qe(e){return Je(Ge(e))}function et(e,t){return Ke(Qe(e),Ye(t))}function tt(e,t){const n=Qe(e),o=Qe(t);return i=n,r=o,Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2));var i,r}let nt;function ot(){nt=new Map}function it(e,t){if(!et(e,t))return null;const n=t.children;if(0===n.length)return{index:0,isProximityBased:!0};const o=function(e){const t=Array.from(e.children).findIndex((e=>e.getAttribute(Re)));if(t>=0)return nt.has(e)||nt.set(e,new Map),nt.get(e).set(t,Ye(e.children[t])),t}(t);for(let i=0;i<n.length;i++)if(et(e,n[i])){const n=nt.has(t)&&nt.get(t).get(i);return n&&!Ke(Qe(e),n)?{index:o,isProximityBased:!1}:{index:i,isProximityBased:!1}}let i,r=Number.MAX_VALUE;for(let t=0;t<n.length;t++){const o=tt(e,n[t]);o<r&&(r=o,i=t)}return{index:i,isProximityBased:!0}}ot();function rt(){let e;function t(){e={directionObj:void 0,stepPx:0}}function n(t){const{directionObj:o,stepPx:i}=e;o&&(t.scrollBy(o.x*i,o.y*i),window.requestAnimationFrame((()=>n(t))))}function o(e){return 25-e}return t(),{scrollIfNeeded:function(i,r){if(!r)return!1;const s=function(e,t){const n=Ge(t);return Ke(e,n)?{top:e.y-n.top,bottom:n.bottom-e.y,left:e.x-n.left,right:Math.min(n.right,document.documentElement.clientWidth)-e.x}:null}(i,r);if(null===s)return t(),!1;const l=!!e.directionObj;let[a,c]=[!1,!1];return r.scrollHeight>r.clientHeight&&(s.bottom<25?(a=!0,e.directionObj={x:0,y:1},e.stepPx=o(s.bottom)):s.top<25&&(a=!0,e.directionObj={x:0,y:-1},e.stepPx=o(s.top)),!l&&a)||r.scrollWidth>r.clientWidth&&(s.right<25?(c=!0,e.directionObj={x:1,y:0},e.stepPx=o(s.right)):s.left<25&&(c=!0,e.directionObj={x:-1,y:0},e.stepPx=o(s.left)),!l&&c)?(n(r),!0):(t(),!1)},resetScrolling:t}}function st(e){return JSON.stringify(e,null,2)}function lt(e){if(!e)throw new Error("cannot get depth of a falsy node");return at(e,0)}function at(e,t=0){return e.parentElement?at(e.parentElement,t+1):t-1}const{scrollIfNeeded:ct,resetScrolling:dt}=rt();let ut;function ft(e,t,n=200){let o,i,r,s=!1;const l=Array.from(t).sort(((e,t)=>lt(t)-lt(e)));!function t(){const a=Qe(e);if(!ct(a,o)&&r&&Math.abs(r.x-a.x)<10&&Math.abs(r.y-a.y)<10)return void(ut=window.setTimeout(t,n));if(function(e){const t=Ge(e);return t.right<0||t.left>document.documentElement.scrollWidth||t.bottom<0||t.top>document.documentElement.scrollHeight}(e))return void function(e){window.dispatchEvent(new CustomEvent(xe,{detail:{draggedEl:e}}))}(e);r=a;let c=!1;for(const t of l){const n=it(e,t);if(null===n)continue;const{index:r}=n;c=!0,t!==o?(o&&Le(o,e,t),De(t,n,e),o=t):r!==i&&(Ae(t,n,e),i=r);break}!c&&s&&o?(!function(e,t){e.dispatchEvent(new CustomEvent(we,{detail:{draggedEl:t,type:ke}}))}(o,e),o=void 0,i=void 0,s=!1):s=!0,ut=window.setTimeout(t,n)}()}let pt;function ht(e){const t=e.touches?e.touches[0]:e;pt={x:t.clientX,y:t.clientY}}const{scrollIfNeeded:gt,resetScrolling:mt}=rt();let vt;function yt(){pt&&gt(pt,document.documentElement),vt=window.setTimeout(yt,300)}function $t(e){return`${e} 0.2s ease`}function wt(e,t,n,o,i){const r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),l=r.width-s.width,a=r.height-s.height;if(l||a){const t={left:(n-s.left)/s.width,top:(o-s.top)/s.height};e.style.height=`${r.height}px`,e.style.width=`${r.width}px`,e.style.left=parseFloat(e.style.left)-t.left*l+"px",e.style.top=parseFloat(e.style.top)-t.top*a+"px"}bt(t,e),i()}function bt(e,t){const n=window.getComputedStyle(e);Array.from(n).filter((e=>e.startsWith("background")||e.startsWith("padding")||e.startsWith("font")||e.startsWith("text")||e.startsWith("align")||e.startsWith("justify")||e.startsWith("display")||e.startsWith("flex")||e.startsWith("border")||"opacity"===e||"color"===e||"list-style-type"===e)).forEach((e=>t.style.setProperty(e,n.getPropertyValue(e),n.getPropertyPriority(e))))}function xt(e,t){e.draggable=!1,e.ondragstart=()=>!1,t?(e.style.userSelect="",e.style.WebkitUserSelect="",e.style.cursor=""):(e.style.userSelect="none",e.style.WebkitUserSelect="none",e.style.cursor="grab")}function Et(e,t=(()=>{}),n=(()=>[])){e.forEach((e=>{const o=t(e);Object.keys(o).forEach((t=>{e.style[t]=o[t]})),n(e).forEach((t=>e.classList.add(t)))}))}function kt(e,t=(()=>{}),n=(()=>[])){e.forEach((e=>{const o=t(e);Object.keys(o).forEach((t=>{e.style[t]=""})),n(e).forEach((t=>e.classList.contains(t)&&e.classList.remove(t)))}))}const Dt={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let Lt,At,Ot,_t,Tt,Ct,St,Mt,jt,Nt,Wt,Bt=!1,It=!1,Ft=!1;const Pt=new Map,Rt=new Map,zt=new WeakMap;function qt(e,t){Pt.get(t).delete(e),Ve(),0===Pt.get(t).size&&Pt.delete(t)}function Ht(){window.addEventListener("mousemove",ht),window.addEventListener("touchmove",ht),yt();const e=Pt.get(_t);for(const t of e)t.addEventListener($e,Xt),t.addEventListener(we,Ut),t.addEventListener(be,Yt);window.addEventListener(xe,Jt);const t=Math.max(100,...Array.from(e.keys()).map((e=>Rt.get(e).dropAnimationDurationMs)));ft(At,e,1.07*t)}function Zt(){window.removeEventListener("mousemove",ht),window.removeEventListener("touchmove",ht),pt=void 0,window.clearTimeout(vt),mt();const e=Pt.get(_t);for(const t of e)t.removeEventListener($e,Xt),t.removeEventListener(we,Ut),t.removeEventListener(be,Yt);window.removeEventListener(xe,Jt),clearTimeout(ut),dt(),ot()}function Vt(e){return e.findIndex((e=>!!e.isDndShadowItem&&e.id!==ze))}function Xt(e){let{items:t,dropFromOthersDisabled:n}=Rt.get(e.currentTarget);if(n&&e.currentTarget!==Tt)return;if(Ft=!1,t=t.filter((e=>e.id!==St.id)),Tt!==e.currentTarget){const e=Rt.get(Tt).items.filter((e=>!e.isDndShadowItem));ye(Tt,e,{trigger:Te,id:Ot.id,source:Ie})}else{const e=function(e){return e.findIndex((e=>e.id===ze))}(t);-1!==e&&t.splice(e,1)}const{index:o,isProximityBased:i}=e.detail.indexObj,r=i&&o===e.currentTarget.children.length-1?o+1:o;Mt=e.currentTarget,t.splice(r,0,St),ye(e.currentTarget,t,{trigger:_e,id:Ot.id,source:Ie})}function Ut(e){if(!Bt)return;const{items:t,dropFromOthersDisabled:n}=Rt.get(e.currentTarget);if(n&&e.currentTarget!==Tt)return;const o=Vt(t),i=t.splice(o,1)[0];Mt=void 0;const{type:r,theOtherDz:s}=e.detail;if(r===ke||r===Ee&&s!==Tt&&Rt.get(s).dropFromOthersDisabled){Ft=!0,Mt=Tt;const e=Rt.get(Tt).items;e.splice(Ct,0,i),ye(Tt,e,{trigger:Me,id:Ot.id,source:Ie})}ye(e.currentTarget,t,{trigger:Se,id:Ot.id,source:Ie})}function Yt(e){const{items:t,dropFromOthersDisabled:n}=Rt.get(e.currentTarget);if(n&&e.currentTarget!==Tt)return;Ft=!1;const{index:o}=e.detail.indexObj,i=Vt(t);t.splice(i,1),t.splice(o,0,St),ye(e.currentTarget,t,{trigger:Ce,id:Ot.id,source:Ie})}function Gt(e){e.preventDefault();const t=e.touches?e.touches[0]:e;Nt={x:t.clientX,y:t.clientY},At.style.transform=`translate3d(${Nt.x-jt.x}px, ${Nt.y-jt.y}px, 0)`}function Jt(){It=!0,window.removeEventListener("mousemove",Gt),window.removeEventListener("touchmove",Gt),window.removeEventListener("mouseup",Jt),window.removeEventListener("touchend",Jt),Zt(),function(e){e.style.cursor="grab"}(At),Mt||(Mt=Tt);let{items:e,type:t}=Rt.get(Mt);kt(Pt.get(t),(e=>Rt.get(e).dropTargetStyle),(e=>Rt.get(e).dropTargetClasses));let n=Vt(e);-1===n&&(n=Ct),e=e.map((e=>e.isDndShadowItem?Ot:e)),function(e,t){const n=Ue(Mt.children[e]),o={x:n.left-parseFloat(At.style.left),y:n.top-parseFloat(At.style.top)},{dropAnimationDurationMs:i}=Rt.get(Mt),r=`transform ${i}ms ease`;At.style.transition=At.style.transition?At.style.transition+","+r:r,At.style.transform=`translate3d(${o.x}px, ${o.y}px, 0)`,window.setTimeout(t,i)}(n,(function(){var t;Wt(),ve(Mt,e,{trigger:Ft?We:je,id:Ot.id,source:Ie}),Mt!==Tt&&ve(Tt,Rt.get(Tt).items,{trigger:Ne,id:Ot.id,source:Ie}),(t=Mt.children[n]).style.visibility="",t.removeAttribute(Re),At.remove(),Lt.remove(),At=void 0,Lt=void 0,Ot=void 0,_t=void 0,Tt=void 0,Ct=void 0,St=void 0,Mt=void 0,jt=void 0,Nt=void 0,Bt=!1,It=!1,Wt=void 0,Ft=!1}))}function Kt(e,t){const n={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:Dt,dropTargetClasses:[],transformDraggedElement:()=>{},centreDraggedOnCursor:!1};let o=new Map;function i(){window.removeEventListener("mousemove",s),window.removeEventListener("touchmove",s),window.removeEventListener("mouseup",r),window.removeEventListener("touchend",r)}function r(){i(),Lt=void 0,jt=void 0,Nt=void 0}function s(e){e.preventDefault();const t=e.touches?e.touches[0]:e;Nt={x:t.clientX,y:t.clientY},(Math.abs(Nt.x-jt.x)>=3||Math.abs(Nt.y-jt.y)>=3)&&(i(),function(){Bt=!0;const e=o.get(Lt);Ct=e,Tt=Lt.parentElement;const{items:t,type:i,centreDraggedOnCursor:r}=n;Ot={...t[e]},_t=i,St={...Ot,[Pe]:!0};const s={...St,[qe]:ze};function l(){var e;At.parentElement?window.requestAnimationFrame(l):(document.body.appendChild(At),At.focus(),Ht(),(e=Lt).style.display="none",e.style.position="fixed",e.style.zIndex="-5",document.body.appendChild(Lt))}At=function(e,t){const n=e.getBoundingClientRect(),o=e.cloneNode(!0);bt(e,o),o.id="dnd-action-dragged-el",o.style.position="fixed";let i=n.top,r=n.left;if(o.style.top=`${i}px`,o.style.left=`${r}px`,t){const e=Je(n);i-=e.y-t.y,r-=e.x-t.x,window.setTimeout((()=>{o.style.top=`${i}px`,o.style.left=`${r}px`}),0)}return o.style.margin="0",o.style.boxSizing="border-box",o.style.height=`${n.height}px`,o.style.width=`${n.width}px`,o.style.transition=`${$t("top")}, ${$t("left")}, ${$t("background-color")}, ${$t("opacity")}, ${$t("color")} `,window.setTimeout((()=>o.style.transition+=`, ${$t("width")}, ${$t("height")}`),0),o.style.zIndex="9999",o.style.cursor="grabbing",o}(Lt,r&&Nt),window.requestAnimationFrame(l),Et(Array.from(Pt.get(n.type)).filter((e=>e===Tt||!Rt.get(e).dropFromOthersDisabled)),(e=>Rt.get(e).dropTargetStyle),(e=>Rt.get(e).dropTargetClasses)),t.splice(e,1,s),Wt=function(e){const t=e.style.minHeight;e.style.minHeight=window.getComputedStyle(e).getPropertyValue("height");const n=e.style.minWidth;return e.style.minWidth=window.getComputedStyle(e).getPropertyValue("width"),function(){e.style.minHeight=t,e.style.minWidth=n}}(Tt),ye(Tt,t,{trigger:Oe,id:Ot.id,source:Ie}),window.addEventListener("mousemove",Gt,{passive:!1}),window.addEventListener("touchmove",Gt,{passive:!1,capture:!1}),window.addEventListener("mouseup",Jt,{passive:!1}),window.addEventListener("touchend",Jt,{passive:!1})}())}function l(e){if(e.target!==e.currentTarget&&(void 0!==e.target.value||e.target.isContentEditable))return;if(e.button)return;if(Bt)return;e.stopPropagation();const t=e.touches?e.touches[0]:e;jt={x:t.clientX,y:t.clientY},Nt={...jt},Lt=e.currentTarget,window.addEventListener("mousemove",s,{passive:!1}),window.addEventListener("touchmove",s,{passive:!1,capture:!1}),window.addEventListener("mouseup",r,{passive:!1}),window.addEventListener("touchend",r,{passive:!1})}function a({items:t,flipDurationMs:i=0,type:r="--any--",dragDisabled:s=!1,morphDisabled:a=!1,dropFromOthersDisabled:c=!1,dropTargetStyle:d=Dt,dropTargetClasses:u=[],transformDraggedElement:f=(()=>{}),centreDraggedOnCursor:p=!1}){var h,g;function m(e,t){return Rt.get(e)?Rt.get(e)[t]:n[t]}n.dropAnimationDurationMs=i,n.type&&r!==n.type&&qt(e,n.type),n.type=r,h=e,g=r,Pt.has(g)||Pt.set(g,new Set),Pt.get(g).has(h)||(Pt.get(g).add(h),Ze()),n.items=[...t],n.dragDisabled=s,n.morphDisabled=a,n.transformDraggedElement=f,n.centreDraggedOnCursor=p,!Bt||It||function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!{}.hasOwnProperty.call(t,n)||t[n]!==e[n])return!1;return!0}(d,n.dropTargetStyle)&&function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(u,n.dropTargetClasses)||(kt([e],(()=>n.dropTargetStyle),(()=>u)),Et([e],(()=>d),(()=>u))),n.dropTargetStyle=d,n.dropTargetClasses=[...u],Bt&&n.dropFromOthersDisabled!==c&&(c?kt([e],(e=>m(e,"dropTargetStyle")),(e=>m(e,"dropTargetClasses"))):Et([e],(e=>m(e,"dropTargetStyle")),(e=>m(e,"dropTargetClasses")))),n.dropFromOthersDisabled=c,Rt.set(e,n);const v=Vt(n.items);for(let t=0;t<e.children.length;t++){const i=e.children[t];xt(i,s),t!==v?(i.removeEventListener("mousedown",zt.get(i)),i.removeEventListener("touchstart",zt.get(i)),s||(i.addEventListener("mousedown",l),i.addEventListener("touchstart",l),zt.set(i,l)),o.set(i,t)):(a||wt(At,i,Nt.x,Nt.y,(()=>n.transformDraggedElement(At,Ot,t))),(y=i).style.visibility="hidden",y.setAttribute(Re,"true"))}var y}return a(t),{update:e=>{a(e)},destroy:()=>{qt(e,n.type),Rt.delete(e)}}}const Qt={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},en={[Qt.DND_ZONE_ACTIVE]:"Tab to one the items and press space-bar or enter to start dragging it",[Qt.DND_ZONE_DRAG_DISABLED]:"This is a disabled drag and drop list"};let tn;function nn(){tn=document.createElement("div"),tn.id="dnd-action-aria-alert",tn.style.position="fixed",tn.style.bottom="0",tn.style.left="0",tn.style.zIndex="-5",tn.style.opacity="0",tn.style.height="0",tn.style.width="0",tn.setAttribute("role","alert"),document.body.prepend(tn),Object.entries(en).forEach((([e,t])=>document.body.prepend(function(e,t){const n=document.createElement("div");return n.id=e,n.innerHTML=`<p>${t}</p>`,n.style.display="none",n.style.position="fixed",n.style.zIndex="-5",n}(e,t))))}function on(e){tn.innerHTML="";const t=document.createTextNode(e);tn.appendChild(t),tn.style.display="none",tn.style.display="inline"}const rn={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let sn,ln,an,cn,dn=!1,un="",fn="";const pn=new WeakSet,hn=new WeakMap,gn=new WeakMap,mn=new Map,vn=new Map,yn=new Map,$n=Xe?null:("complete"===document.readyState?nn():window.addEventListener("DOMContentLoaded",nn),{...Qt});function wn(e,t){ln===e&&Dn(),yn.get(t).delete(e),Ve(),0===yn.get(t).size&&yn.delete(t),0===yn.size&&(window.removeEventListener("keydown",bn),window.removeEventListener("click",xn))}function bn(e){if(dn)switch(e.key){case"Escape":Dn()}}function xn(){dn&&(pn.has(document.activeElement)||Dn())}function En(e){if(!dn)return;const t=e.currentTarget;if(t===ln)return;un=t.getAttribute("aria-label")||"";const{items:n}=vn.get(ln),o=n.find((e=>e.id===cn)),i=n.indexOf(o),r=n.splice(i,1)[0],{items:s,autoAriaDisabled:l}=vn.get(t);t.getBoundingClientRect().top<ln.getBoundingClientRect().top||t.getBoundingClientRect().left<ln.getBoundingClientRect().left?(s.push(r),l||on(`Moved item ${fn} to the end of the list ${un}`)):(s.unshift(r),l||on(`Moved item ${fn} to the beginning of the list ${un}`));ve(ln,n,{trigger:Ne,id:cn,source:Fe}),ve(t,s,{trigger:je,id:cn,source:Fe}),ln=t}function kn(){mn.forEach((({update:e},t)=>e(vn.get(t))))}function Dn(e=!0){vn.get(ln).autoAriaDisabled||on(`Stopped dragging item ${fn}`),pn.has(document.activeElement)&&document.activeElement.blur(),e&&ye(ln,vn.get(ln).items,{trigger:Be,id:cn,source:Fe}),kt(yn.get(sn),(e=>vn.get(e).dropTargetStyle),(e=>vn.get(e).dropTargetClasses)),an=null,cn=null,fn="",sn=null,ln=null,un="",dn=!1,kn()}function Ln(e,t){const n={items:void 0,type:void 0,dragDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:rn,dropTargetClasses:[],autoAriaDisabled:!1};function o(e,t,n){e.length<=1||e.splice(n,1,e.splice(t,1,e[n])[0])}function i(t){switch(t.key){case"Enter":case" ":if((void 0!==t.target.disabled||t.target.href||t.target.isContentEditable)&&!pn.has(t.target))return;t.preventDefault(),t.stopPropagation(),dn?Dn():r(t);break;case"ArrowDown":case"ArrowRight":{if(!dn)return;t.preventDefault(),t.stopPropagation();const{items:i}=vn.get(e),r=Array.from(e.children),s=r.indexOf(t.currentTarget);s<r.length-1&&(n.autoAriaDisabled||on(`Moved item ${fn} to position ${s+2} in the list ${un}`),o(i,s,s+1),ve(e,i,{trigger:je,id:cn,source:Fe}));break}case"ArrowUp":case"ArrowLeft":{if(!dn)return;t.preventDefault(),t.stopPropagation();const{items:i}=vn.get(e),r=Array.from(e.children).indexOf(t.currentTarget);r>0&&(n.autoAriaDisabled||on(`Moved item ${fn} to position ${r} in the list ${un}`),o(i,r,r-1),ve(e,i,{trigger:je,id:cn,source:Fe}));break}}}function r(t){!function(t){const{items:n}=vn.get(e),o=Array.from(e.children),i=o.indexOf(t);an=t,an.tabIndex=0,cn=n[i].id,fn=o[i].getAttribute("aria-label")||""}(t.currentTarget),ln=e,sn=n.type,dn=!0;const o=Array.from(yn.get(n.type)).filter((e=>e===ln||!vn.get(e).dropFromOthersDisabled));if(Et(o,(e=>vn.get(e).dropTargetStyle),(e=>vn.get(e).dropTargetClasses)),!n.autoAriaDisabled){let e=`Started dragging item ${fn}. Use the arrow keys to move it within its list ${un}`;o.length>1&&(e+=", or tab to another list in order to move the item into it"),on(e)}ye(e,vn.get(e).items,{trigger:Oe,id:cn,source:Fe}),kn()}function s(e){dn&&e.currentTarget!==an&&(e.stopPropagation(),Dn(!1),r(e))}function l({items:t=[],type:o="--any--",dragDisabled:r=!1,dropFromOthersDisabled:l=!1,dropTargetStyle:a=rn,dropTargetClasses:c=[],autoAriaDisabled:d=!1}){var u,f;n.items=[...t],n.dragDisabled=r,n.dropFromOthersDisabled=l,n.dropTargetStyle=a,n.dropTargetClasses=c,n.autoAriaDisabled=d,d||(e.setAttribute("aria-disabled",r),e.setAttribute("role","list"),e.setAttribute("aria-describedby",r?$n.DND_ZONE_DRAG_DISABLED:$n.DND_ZONE_ACTIVE)),n.type&&o!==n.type&&wn(e,n.type),n.type=o,u=e,f=o,0===yn.size&&(window.addEventListener("keydown",bn),window.addEventListener("click",xn)),yn.has(f)||yn.set(f,new Set),yn.get(f).has(u)||(yn.get(f).add(u),Ze()),vn.set(e,n),e.tabIndex=dn&&(e===ln||an.contains(e)||n.dropFromOthersDisabled||ln&&n.type!==vn.get(ln).type)?-1:0,e.addEventListener("focus",En);for(let t=0;t<e.children.length;t++){const o=e.children[t];pn.add(o),o.tabIndex=dn?-1:0,d||o.setAttribute("role","listitem"),o.removeEventListener("keydown",hn.get(o)),o.removeEventListener("click",gn.get(o)),r||(o.addEventListener("keydown",i),hn.set(o,i),o.addEventListener("click",s),gn.set(o,s)),dn&&n.items[t].id===cn&&(an=o,an.tabIndex=0,o.focus())}}l(t);const a={update:e=>{l(e)},destroy:()=>{wn(e,n.type),vn.delete(e),mn.delete(e)}};return mn.set(e,a),a}function An(e,t){On(t);const n=Kt(e,t),o=Ln(e,t);return{update:e=>{On(e),n.update(e),o.update(e)},destroy:()=>{n.destroy(),o.destroy()}}}function On(e){const{items:t,flipDurationMs:n,type:o,dragDisabled:i,morphDisabled:r,dropFromOthersDisabled:s,dropTargetStyle:l,dropTargetClasses:a,transformDraggedElement:c,autoAriaDisabled:d,centreDraggedOnCursor:u,...f}=e;if(Object.keys(f).length>0&&console.warn("dndzone will ignore unknown options",f),!t)throw new Error("no 'items' key provided to dndzone");const p=t.find((e=>!{}.hasOwnProperty.call(e,qe)));if(p)throw new Error(`missing 'id' property for item ${st(p)}`);if(a&&!Array.isArray(a))throw new Error(`dropTargetClasses should be an array but instead it is a ${typeof a}, ${st(a)}`)}function _n(e){const t=e-1;return t*t*t+1}function Tn(e,t,n={}){const o=getComputedStyle(e),i="none"===o.transform?"":o.transform,s=t.from.width/e.clientWidth,l=t.from.height/e.clientHeight,a=(t.from.left-t.to.left)/s,c=(t.from.top-t.to.top)/l,d=Math.sqrt(a*a+c*c),{delay:u=0,duration:f=(e=>120*Math.sqrt(e)),easing:p=_n}=n;return{delay:u,duration:r(f)?f(d):f,easing:p,css:(e,t)=>`transform: ${i} translate(${t*a}px, ${t*c}px);`}}function Cn(t){let n,o,i;return{c(){n=y("svg"),o=y("line"),i=y("line"),E(o,"x1","18"),E(o,"y1","6"),E(o,"x2","6"),E(o,"y2","18"),E(i,"x1","6"),E(i,"y1","6"),E(i,"x2","18"),E(i,"y2","18"),E(n,"width","14"),E(n,"height","14"),E(n,"viewBox","0 0 21 21"),E(n,"fill","none"),E(n,"stroke",t[0]),E(n,"stroke-width","2"),E(n,"stroke-linecap","round"),E(n,"stroke-linejoin","round"),E(n,"class","feather feather-x")},m(e,t){g(e,n,t),h(n,o),h(n,i)},p(e,[t]){1&t&&E(n,"stroke",e[0])},i:e,o:e,d(e){e&&m(n)}}}function Sn(e,t,n){let{stroke:o="#0D121F"}=t;return e.$$set=e=>{"stroke"in e&&n(0,o=e.stroke)},[o]}class Mn extends ce{constructor(e){super(),ae(this,e,Sn,Cn,s,{stroke:0})}}function jn(t){let n,o,i,r,s,l,a,c,d,u,f,p,y;return{c(){n=v("div"),o=v("input"),r=w(),s=v("span"),l=$(t[2]),a=w(),c=v("span"),c.innerHTML='<span class="switch-handle svelte-1eu83y3"></span>',d=w(),u=v("span"),f=$(t[3]),E(o,"name",t[1]),E(o,"type","hidden"),o.value=i=t[0]||"",E(s,"class","switch-label"),E(c,"class","switch-wrapper svelte-1eu83y3"),E(u,"class","switch-label"),E(n,"class","switch-input svelte-1eu83y3"),L(n,"active",t[0])},m(e,i){g(e,n,i),h(n,o),h(n,r),h(n,s),h(s,l),h(n,a),h(n,c),h(n,d),h(n,u),h(u,f),p||(y=x(n,"click",t[4]),p=!0)},p(e,[t]){2&t&&E(o,"name",e[1]),1&t&&i!==(i=e[0]||"")&&(o.value=i),4&t&&k(l,e[2]),8&t&&k(f,e[3]),1&t&&L(n,"active",e[0])},i:e,o:e,d(e){e&&m(n),p=!1,y()}}}function Nn(e,t,n){let{name:o}=t,{value:i}=t,{leftLabel:r}=t,{rightLabel:s}=t;return e.$$set=e=>{"name"in e&&n(1,o=e.name),"value"in e&&n(0,i=e.value),"leftLabel"in e&&n(2,r=e.leftLabel),"rightLabel"in e&&n(3,s=e.rightLabel)},[i,o,r,s,()=>n(0,i=!i)]}class Wn extends ce{constructor(e){super(),ae(this,e,Nn,jn,s,{name:1,value:0,leftLabel:2,rightLabel:3})}}function Bn(e){let t,n,o;function i(t){e[2](t)}let r={name:e[1]+"negation",leftLabel:"IS",rightLabel:"NOT"};return void 0!==e[0]&&(r.value=e[0]),t=new Wn({props:r}),B.push((()=>ie(t,"value",i))),{c(){re(t.$$.fragment)},m(e,n){se(t,e,n),o=!0},p(e,[o]){const i={};2&o&&(i.name=e[1]+"negation"),!n&&1&o&&(n=!0,i.value=e[0],H((()=>n=!1))),t.$set(i)},i(e){o||(Q(t.$$.fragment,e),o=!0)},o(e){ee(t.$$.fragment,e),o=!1},d(e){le(t,e)}}}function In(e,t,n){let o;l(e,ge,(e=>n(1,o=e)));let{value:i=!1}=t;return e.$$set=e=>{"value"in e&&n(0,i=e.value)},[i,o,function(e){i=e,n(0,i)}]}class Fn extends ce{constructor(e){super(),ae(this,e,In,Bn,s,{value:0})}}var Pn;function Rn(t){let n,o;return{c(){n=y("svg"),o=y("path"),E(o,"d","M1 1L5.5 5.5L10 1"),E(o,"stroke",t[0]),E(o,"stroke-width","2"),E(n,"width","11"),E(n,"height","7"),E(n,"viewBox","0 0 11 7"),E(n,"fill","none"),E(n,"xmlns","http://www.w3.org/2000/svg")},m(e,t){g(e,n,t),h(n,o)},p(e,[t]){1&t&&E(o,"stroke",e[0])},i:e,o:e,d(e){e&&m(n)}}}function zn(e,t,n){let{stroke:o="#0D121F"}=t;return e.$$set=e=>{"stroke"in e&&n(0,o=e.stroke)},[o]}!function(e){e.AND="AND",e.OR="OR"}(Pn||(Pn={}));class qn extends ce{constructor(e){super(),ae(this,e,zn,Rn,s,{stroke:0})}}function Hn(e,t,n){const o=e.slice();return o[0]=t[n].value,o[12]=t[n].label,o}function Zn(e){let t,n=[],o=new Map,i=e[1];const r=e=>e[0];for(let t=0;t<i.length;t+=1){let s=Hn(e,i,t),l=r(s);o.set(l,n[t]=Vn(l,s))}return{c(){t=v("ul");for(let e=0;e<n.length;e+=1)n[e].c();E(t,"class","options svelte-7kihaa"),E(t,"data-simplebar","")},m(e,o){g(e,t,o);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,s){258&s&&(i=e[1],n=oe(n,s,r,1,e,i,o,t,te,Vn,null,Hn))},d(e){e&&m(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function Vn(e,t){let n,o,i,s,l=t[12]+"";return{key:e,first:null,c(){n=v("li"),o=$(l),E(n,"class","option svelte-7kihaa"),this.first=n},m(e,l){g(e,n,l),h(n,o),i||(s=x(n,"click",(function(){r(t[8](t[0]))&&t[8](t[0]).apply(this,arguments)})),i=!0)},p(e,n){t=e,2&n&&l!==(l=t[12]+"")&&k(o,l)},d(e){e&&m(n),i=!1,s()}}}function Xn(e){let t,n,o,r,s,l,a,c,d,u,f,p,y,b=(e[7]?e[7].label:e[4])+"";d=new qn({});let D=e[6]&&Zn(e);return{c(){t=v("div"),n=v("input"),o=w(),r=v("div"),s=v("span"),l=$(b),a=w(),c=v("i"),re(d.$$.fragment),u=w(),D&&D.c(),E(n,"type","hidden"),E(n,"name",e[2]),n.value=e[0],E(s,"class","value-label svelte-7kihaa"),L(s,"placeholder",!e[7]),E(c,"class","caret-icon svelte-7kihaa"),E(r,"class","selected-value svelte-7kihaa"),E(t,"class","pseudo-select svelte-7kihaa"),L(t,"full-width",e[5]),L(t,"disabled",e[3])},m(i,m){g(i,t,m),h(t,n),h(t,o),h(t,r),h(r,s),h(s,l),h(r,a),h(r,c),se(d,c,null),h(t,u),D&&D.m(t,null),f=!0,p||(y=[x(t,"click",e[9]),x(t,"mouseleave",e[10])],p=!0)},p(e,[o]){(!f||4&o)&&E(n,"name",e[2]),(!f||1&o)&&(n.value=e[0]),(!f||144&o)&&b!==(b=(e[7]?e[7].label:e[4])+"")&&k(l,b),128&o&&L(s,"placeholder",!e[7]),e[6]?D?D.p(e,o):(D=Zn(e),D.c(),D.m(t,null)):D&&(D.d(1),D=null),32&o&&L(t,"full-width",e[5]),8&o&&L(t,"disabled",e[3])},i(e){f||(Q(d.$$.fragment,e),f=!0)},o(e){ee(d.$$.fragment,e),f=!1},d(e){e&&m(t),le(d),D&&D.d(),p=!1,i(y)}}}function Un(e,t,n){let o;const i=N();let{options:r}=t,{name:s}=t,{disabled:l=!1}=t,{placeholder:a=""}=t,{value:c=null}=t,{fullWidth:d=!1}=t,u=!1;return e.$$set=e=>{"options"in e&&n(1,r=e.options),"name"in e&&n(2,s=e.name),"disabled"in e&&n(3,l=e.disabled),"placeholder"in e&&n(4,a=e.placeholder),"value"in e&&n(0,c=e.value),"fullWidth"in e&&n(5,d=e.fullWidth)},e.$$.update=()=>{3&e.$$.dirty&&n(7,o=r.find((({value:e})=>e===c)))},[c,r,s,l,a,d,u,o,e=>()=>{n(0,c=e),i("change",{value:c})},()=>n(6,u=!u),()=>n(6,u=!1)]}class Yn extends ce{constructor(e){super(),ae(this,e,Un,Xn,s,{options:1,name:2,disabled:3,placeholder:4,value:0,fullWidth:5})}}function Gn(e){let t,n,o,i;function r(t){e[4](t)}let s={options:e[3],disabled:e[1],fullWidth:!0,name:e[2]+"junction"};return void 0!==e[0]&&(s.value=e[0]),n=new Yn({props:s}),B.push((()=>ie(n,"value",r))),{c(){t=v("div"),re(n.$$.fragment),E(t,"class","junction-input svelte-14twzbn"),L(t,"disabled",e[1])},m(e,o){g(e,t,o),se(n,t,null),i=!0},p(e,[i]){const r={};2&i&&(r.disabled=e[1]),4&i&&(r.name=e[2]+"junction"),!o&&1&i&&(o=!0,r.value=e[0],H((()=>o=!1))),n.$set(r),2&i&&L(t,"disabled",e[1])},i(e){i||(Q(n.$$.fragment,e),i=!0)},o(e){ee(n.$$.fragment,e),i=!1},d(e){e&&m(t),le(n)}}}function Jn(e,t,n){let o;l(e,ge,(e=>n(2,o=e)));let{disabled:i}=t,{value:r=Pn.AND}=t,s=[...Object.values(Pn)].map((e=>({value:e,label:e})));return e.$$set=e=>{"disabled"in e&&n(1,i=e.disabled),"value"in e&&n(0,r=e.value)},[r,i,o,s,function(e){r=e,n(0,r)}]}class Kn extends ce{constructor(e){super(),ae(this,e,Jn,Gn,s,{disabled:1,value:0})}}function Qn(e){let t,n,o,i;function r(t){e[3](t)}let s={options:e[2],name:e[1]+"type",fullWidth:!0};return void 0!==e[0]&&(s.value=e[0]),n=new Yn({props:s}),B.push((()=>ie(n,"value",r))),n.$on("change",e[4]),{c(){t=v("div"),re(n.$$.fragment),E(t,"class","type-input svelte-42b1jp")},m(e,o){g(e,t,o),se(n,t,null),i=!0},p(e,[t]){const i={};2&t&&(i.name=e[1]+"type"),!o&&1&t&&(o=!0,i.value=e[0],H((()=>o=!1))),n.$set(i)},i(e){i||(Q(n.$$.fragment,e),i=!0)},o(e){ee(n.$$.fragment,e),i=!1},d(e){e&&m(t),le(n)}}}function eo(e,t,n){let o;l(e,ge,(e=>n(1,o=e)));let{value:i}=t,r=[...Object.entries(fe.definitions)].filter((([,{hidden:e}])=>!e)).map((([e,{label:t}])=>({value:e,label:t})));return e.$$set=e=>{"value"in e&&n(0,i=e.value)},[i,o,r,function(e){i=e,n(0,i)},function(t){!function(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e(t)))}(e,t)}]}class to extends ce{constructor(e){super(),ae(this,e,eo,Qn,s,{value:0})}}function no(t){let n,o,r,s;return{c(){n=v("input"),E(n,"name",o=t[2]+"value"),E(n,"type","text"),E(n,"placeholder",t[1]),E(n,"class","svelte-16dbqpn")},m(e,o){g(e,n,o),D(n,t[0].value),r||(s=[x(n,"input",t[4]),x(n,"keydown",t[3])],r=!0)},p(e,[t]){4&t&&o!==(o=e[2]+"value")&&E(n,"name",o),2&t&&E(n,"placeholder",e[1]),1&t&&n.value!==e[0].value&&D(n,e[0].value)},i:e,o:e,d(e){e&&m(n),r=!1,i(s)}}}function oo(e,t,n){let o;l(e,ge,(e=>n(2,o=e)));let{placeholder:i=""}=t,{field:r}=t;const s=e=>{e.closest("form").submit()};return e.$$set=e=>{"placeholder"in e&&n(1,i=e.placeholder),"field"in e&&n(0,r=e.field)},[r,i,o,e=>{switch(e.key){case"Enter":return s(e.target)}},function(){r.value=this.value,n(0,r)}]}class io extends ce{constructor(e){super(),ae(this,e,oo,no,s,{placeholder:1,field:0})}}function ro(e,t,n){const o=e.slice();return o[27]=t[n],o}function so(t){let n,o,i,r,s;return o=new Mn({}),{c(){n=v("i"),re(o.$$.fragment),E(n,"class","cross-icon svelte-mslv28")},m(e,l){var a;g(e,n,l),se(o,n,null),i=!0,r||(s=x(n,"click",(a=t[14],function(e){return e.stopPropagation(),a.call(this,e)})),r=!0)},p:e,i(e){i||(Q(o.$$.fragment,e),i=!0)},o(e){ee(o.$$.fragment,e),i=!1},d(e){e&&m(n),le(o),r=!1,s()}}}function lo(e){let t,n,o,i,r,s,l,a=e[13](e[27].label,e[7])+"";function c(){return e[18](e[27])}return{c(){t=v("li"),o=w(),n=new A(o),E(t,"class","select2-options--option svelte-mslv28"),E(t,"data-value",i=e[27].value),E(t,"data-label",r=e[27].label),E(t,"role","option"),L(t,"selected",e[0]===e[27].value)},m(e,i){g(e,t,i),n.m(a,t),h(t,o),s||(l=x(t,"click",c),s=!0)},p(o,s){e=o,136&s&&a!==(a=e[13](e[27].label,e[7])+"")&&n.p(a),8&s&&i!==(i=e[27].value)&&E(t,"data-value",i),8&s&&r!==(r=e[27].label)&&E(t,"data-label",r),9&s&&L(t,"selected",e[0]===e[27].value)},d(e){e&&m(t),s=!1,l()}}}function ao(e,t){let n,o,i=uo(t[27].label,t[7]),r=i&&lo(t);return{key:e,first:null,c(){n=b(),r&&r.c(),o=b(),this.first=n},m(e,t){g(e,n,t),r&&r.m(e,t),g(e,o,t)},p(e,n){t=e,136&n&&(i=uo(t[27].label,t[7])),i?r?r.p(t,n):(r=lo(t),r.c(),r.m(o.parentNode,o)):r&&(r.d(1),r=null)},d(e){e&&m(n),r&&r.d(e),e&&m(o)}}}function co(e){let t,n,o,r,s,l,a,c,d,u,f,p,y,$,b,k=[],A=new Map,O=e[7]&&so(e);u=new qn({});let _=e[3];const T=e=>e[27].value;for(let t=0;t<_.length;t+=1){let n=ro(e,_,t),o=T(n);A.set(o,k[t]=ao(o,n))}return{c(){t=v("div"),n=v("input"),o=w(),r=v("div"),s=v("span"),l=v("input"),a=w(),O&&O.c(),c=w(),d=v("i"),re(u.$$.fragment),f=w(),p=v("ul");for(let e=0;e<k.length;e+=1)k[e].c();E(n,"type","hidden"),E(n,"name",e[1]),n.value=e[0],E(l,"placeholder",e[2]),E(l,"autocomplete","off"),E(l,"class","svelte-mslv28"),E(s,"class","select2_selected--label svelte-mslv28"),E(d,"class","caret-icon svelte-mslv28"),E(r,"class","select2_selected svelte-mslv28"),E(p,"class","select2_options svelte-mslv28"),E(p,"data-simplebar",""),L(p,"show",e[4]),E(t,"class","select2 svelte-mslv28"),L(t,"active",e[4])},m(i,m){g(i,t,m),h(t,n),h(t,o),h(t,r),h(r,s),h(s,l),e[16](l),D(l,e[7]),h(r,a),O&&O.m(r,null),h(r,c),h(r,d),se(u,d,null),h(t,f),h(t,p);for(let e=0;e<k.length;e+=1)k[e].m(p,null);e[19](p),y=!0,$||(b=[x(l,"input",e[17]),x(l,"keydown",e[11]),x(l,"input",e[10]),x(r,"click",e[8]),x(p,"mouseleave",e[9])],$=!0)},p(e,[o]){(!y||2&o)&&E(n,"name",e[1]),(!y||1&o)&&(n.value=e[0]),(!y||4&o)&&E(l,"placeholder",e[2]),128&o&&l.value!==e[7]&&D(l,e[7]),e[7]?O?(O.p(e,o),128&o&&Q(O,1)):(O=so(e),O.c(),Q(O,1),O.m(r,c)):O&&(J(),ee(O,1,1,(()=>{O=null})),K()),12425&o&&(_=e[3],k=oe(k,o,T,1,e,_,A,p,te,ao,null,ro)),16&o&&L(p,"show",e[4]),16&o&&L(t,"active",e[4])},i(e){y||(Q(O),Q(u.$$.fragment,e),y=!0)},o(e){ee(O),ee(u.$$.fragment,e),y=!1},d(n){n&&m(t),e[16](null),O&&O.d(),le(u);for(let e=0;e<k.length;e+=1)k[e].d();e[19](null),$=!1,i(b)}}}function uo(e,t){return e.toLowerCase().includes(t.toLowerCase())}function fo(e,t){for(let n=0;n<e.length;n++)if(e[n].classList.contains(t))return!0;return!1}function po(e,t,n){let o,i;var r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{a(o.next(e))}catch(e){r(e)}}function l(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,l)}a((o=o.apply(e,t||[])).next())}))};const s=N();let l,a,{name:c}=t,{value:d=null}=t,{placeholder:u=""}=t,{options:f}=t,p=!1;function h(){n(4,p=!1),document.activeElement.blur()}function g(){n(4,p=!0)}function m(e,t){return r(this,void 0,void 0,(function*(){n(0,d=t),n(7,i=e),yield(z(),P),n(6,a.value=o?o.label:"",a),s("change",{value:d}),h()}))}function v(){if(l&&(null===(e=l.querySelector("li.selected"))||void 0===e||!e)){let e=l.querySelector("li:first-child");e&&e.classList.add("selected")}var e}function y(){let e=l.querySelectorAll("li.selected");for(let t=0;t<e.length;t++)e[t].classList.remove("selected")}return e.$$set=e=>{"name"in e&&n(1,c=e.name),"value"in e&&n(0,d=e.value),"placeholder"in e&&n(2,u=e.placeholder),"options"in e&&n(3,f=e.options)},e.$$.update=()=>{9&e.$$.dirty&&n(15,o=f.find((({value:e})=>e===d))),32768&e.$$.dirty&&n(7,i=o?o.label:"")},[d,c,u,f,p,l,a,i,function(){n(4,p=!p),p&&a.focus(),v()},h,function(e){g(),y(),v()},function(e){if(!["ArrowDown","ArrowUp","Enter","Backspace","Escape"].includes(e.key)||!l)return;"Backspace"!==e.key&&e.preventDefault();let t=l.querySelector("li.selected");switch(e.key){case"Enter":if(!t)return;let e=t.getAttribute("data-value");m(t.getAttribute("data-label"),e);break;case"ArrowDown":if(g(),fo(l.querySelectorAll("li"),"selected")){let e=t.nextElementSibling;e&&(y(),e.classList.add("selected"),e.scrollIntoView())}else v();break;case"ArrowUp":if(g(),fo(l.querySelectorAll("li"),"selected")){let e=t.previousElementSibling;e&&(y(),e.classList.add("selected"),e.scrollIntoView())}else v();break;case"Backspace":n(0,d="");break;case"Escape":h()}},m,function(e,t){if(!t||t.length<=1)return e;const n=new RegExp(t,"gi");return e.replace(n,'<mark class="highlight">$&</mark>')},function(){n(0,d=""),n(7,i=""),h()},o,function(e){B[e?"unshift":"push"]((()=>{a=e,n(6,a)}))},function(){i=this.value,n(7,i),n(15,o),n(3,f),n(0,d)},e=>{m(e.label,e.value)},function(e){B[e?"unshift":"push"]((()=>{l=e,n(5,l)}))}]}class ho extends ce{constructor(e){super(),ae(this,e,po,co,s,{name:1,value:0,placeholder:2,options:3})}}function go(e){let t,n,o;function i(t){e[6](t)}let r={options:e[2],name:e[4]+"value",placeholder:e[1]};return void 0!==e[0].value&&(r.value=e[0].value),t=new Yn({props:r}),B.push((()=>ie(t,"value",i))),{c(){re(t.$$.fragment)},m(e,n){se(t,e,n),o=!0},p(e,o){const i={};4&o&&(i.options=e[2]),16&o&&(i.name=e[4]+"value"),2&o&&(i.placeholder=e[1]),!n&&1&o&&(n=!0,i.value=e[0].value,H((()=>n=!1))),t.$set(i)},i(e){o||(Q(t.$$.fragment,e),o=!0)},o(e){ee(t.$$.fragment,e),o=!1},d(e){le(t,e)}}}function mo(e){let t,n,o;function i(t){e[5](t)}let r={options:e[2],name:e[4]+"value",placeholder:e[1]};return void 0!==e[0].value&&(r.value=e[0].value),t=new ho({props:r}),B.push((()=>ie(t,"value",i))),{c(){re(t.$$.fragment)},m(e,n){se(t,e,n),o=!0},p(e,o){const i={};4&o&&(i.options=e[2]),16&o&&(i.name=e[4]+"value"),2&o&&(i.placeholder=e[1]),!n&&1&o&&(n=!0,i.value=e[0].value,H((()=>n=!1))),t.$set(i)},i(e){o||(Q(t.$$.fragment,e),o=!0)},o(e){ee(t.$$.fragment,e),o=!1},d(e){le(t,e)}}}function vo(e){let t,n,o,i;const r=[mo,go],s=[];function l(e,t){return e[3]?0:1}return t=l(e),n=s[t]=r[t](e),{c(){n.c(),o=b()},m(e,n){s[t].m(e,n),g(e,o,n),i=!0},p(e,[i]){let a=t;t=l(e),t===a?s[t].p(e,i):(J(),ee(s[a],1,1,(()=>{s[a]=null})),K(),n=s[t],n?n.p(e,i):(n=s[t]=r[t](e),n.c()),Q(n,1),n.m(o.parentNode,o))},i(e){i||(Q(n),i=!0)},o(e){ee(n),i=!1},d(e){s[t].d(e),e&&m(o)}}}function yo(e,t,n){let o;l(e,ge,(e=>n(4,o=e)));let{placeholder:i=""}=t,{options:r}=t,{field:s}=t,{autocomplete:a=!1}=t;return e.$$set=e=>{"placeholder"in e&&n(1,i=e.placeholder),"options"in e&&n(2,r=e.options),"field"in e&&n(0,s=e.field),"autocomplete"in e&&n(3,a=e.autocomplete)},[s,i,r,a,o,function(t){e.$$.not_equal(s.value,t)&&(s.value=t,n(0,s))},function(t){e.$$.not_equal(s.value,t)&&(s.value=t,n(0,s))}]}class $o extends ce{constructor(e){super(),ae(this,e,yo,vo,s,{placeholder:1,options:2,field:0,autocomplete:3})}}function wo(t){let n,o,i,r,s,l,a,c,d;return{c(){n=y("svg"),o=y("circle"),i=y("circle"),r=y("circle"),s=y("circle"),l=y("circle"),a=y("circle"),c=y("circle"),d=y("circle"),E(o,"cx","1.5"),E(o,"cy","1.5"),E(o,"r","1.5"),E(o,"fill",t[0]),E(i,"cx","1.5"),E(i,"cy","11.5"),E(i,"r","1.5"),E(i,"fill",t[0]),E(r,"cx","1.5"),E(r,"cy","6.5"),E(r,"r","1.5"),E(r,"fill",t[0]),E(s,"cx","1.5"),E(s,"cy","16.5"),E(s,"r","1.5"),E(s,"fill",t[0]),E(l,"cx","6.5"),E(l,"cy","1.5"),E(l,"r","1.5"),E(l,"fill",t[0]),E(a,"cx","6.5"),E(a,"cy","11.5"),E(a,"r","1.5"),E(a,"fill",t[0]),E(c,"cx","6.5"),E(c,"cy","6.5"),E(c,"r","1.5"),E(c,"fill",t[0]),E(d,"cx","6.5"),E(d,"cy","16.5"),E(d,"r","1.5"),E(d,"fill",t[0]),E(n,"width","8"),E(n,"height","18"),E(n,"viewBox","0 0 8 18"),E(n,"fill","none"),E(n,"xmlns","http://www.w3.org/2000/svg")},m(e,t){g(e,n,t),h(n,o),h(n,i),h(n,r),h(n,s),h(n,l),h(n,a),h(n,c),h(n,d)},p(e,[t]){1&t&&E(o,"fill",e[0]),1&t&&E(i,"fill",e[0]),1&t&&E(r,"fill",e[0]),1&t&&E(s,"fill",e[0]),1&t&&E(l,"fill",e[0]),1&t&&E(a,"fill",e[0]),1&t&&E(c,"fill",e[0]),1&t&&E(d,"fill",e[0])},i:e,o:e,d(e){e&&m(n)}}}function bo(e,t,n){let{stroke:o="#C4C4C4"}=t;return e.$$set=e=>{"stroke"in e&&n(0,o=e.stroke)},[o]}class xo extends ce{constructor(e){super(),ae(this,e,bo,wo,s,{stroke:0})}}function Eo(t){let n,o,i,r,s,l,a;return{c(){n=y("svg"),o=y("rect"),i=y("path"),r=y("path"),s=y("rect"),l=y("path"),a=y("path"),E(o,"x","7"),E(o,"y","2.40088"),E(o,"width","1.4"),E(o,"height","11.2"),E(o,"fill",t[0]),E(i,"d","M5.6 2.40088H9.8L7.7 0.300879L5.6 2.40088Z"),E(i,"fill",t[0]),E(r,"d","M9.8 13.6008L5.6 13.6008L7.7 15.7008L9.8 13.6008Z"),E(r,"fill",t[0]),E(s,"x","13.3"),E(s,"y","7.30078"),E(s,"width","1.4"),E(s,"height","11.2"),E(s,"transform","rotate(90 13.3 7.30078)"),E(s,"fill",t[0]),E(l,"d","M13.3 5.90088L13.3 10.1009L15.4 8.00088L13.3 5.90088Z"),E(l,"fill",t[0]),E(a,"d","M2.1 10.1008L2.1 5.90083L-1.52231e-06 8.00083L2.1 10.1008Z"),E(a,"fill",t[0]),E(n,"width","16"),E(n,"height","16"),E(n,"viewBox","0 0 16 16"),E(n,"fill","none"),E(n,"xmlns","http://www.w3.org/2000/svg")},m(e,t){g(e,n,t),h(n,o),h(n,i),h(n,r),h(n,s),h(n,l),h(n,a)},p(e,[t]){1&t&&E(o,"fill",e[0]),1&t&&E(i,"fill",e[0]),1&t&&E(r,"fill",e[0]),1&t&&E(s,"fill",e[0]),1&t&&E(l,"fill",e[0]),1&t&&E(a,"fill",e[0])},i:e,o:e,d(e){e&&m(n)}}}function ko(e,t,n){let{stroke:o="#A0A0A0"}=t;return e.$$set=e=>{"stroke"in e&&n(0,o=e.stroke)},[o]}class Do extends ce{constructor(e){super(),ae(this,e,ko,Eo,s,{stroke:0})}}function Lo(t){let n;return{c(){n=v("strong"),n.textContent="Unsupported field type"},m(e,t){g(e,n,t)},p:e,i:e,o:e,d(e){e&&m(n)}}}function Ao(e){let t,n,o;function i(t){e[7](t)}let r={options:e[2].options,placeholder:e[2].placeholder,autocomplete:!0};return void 0!==e[0]&&(r.field=e[0]),t=new $o({props:r}),B.push((()=>ie(t,"field",i))),{c(){re(t.$$.fragment)},m(e,n){se(t,e,n),o=!0},p(e,o){const i={};4&o&&(i.options=e[2].options),4&o&&(i.placeholder=e[2].placeholder),!n&&1&o&&(n=!0,i.field=e[0],H((()=>n=!1))),t.$set(i)},i(e){o||(Q(t.$$.fragment,e),o=!0)},o(e){ee(t.$$.fragment,e),o=!1},d(e){le(t,e)}}}function Oo(e){let t,n,o;function i(t){e[6](t)}let r={options:e[2].options,placeholder:e[2].placeholder};return void 0!==e[0]&&(r.field=e[0]),t=new $o({props:r}),B.push((()=>ie(t,"field",i))),{c(){re(t.$$.fragment)},m(e,n){se(t,e,n),o=!0},p(e,o){const i={};4&o&&(i.options=e[2].options),4&o&&(i.placeholder=e[2].placeholder),!n&&1&o&&(n=!0,i.field=e[0],H((()=>n=!1))),t.$set(i)},i(e){o||(Q(t.$$.fragment,e),o=!0)},o(e){ee(t.$$.fragment,e),o=!1},d(e){le(t,e)}}}function _o(e){let t,n,o;function i(t){e[5](t)}let r={placeholder:e[2].placeholder};return void 0!==e[0]&&(r.field=e[0]),t=new io({props:r}),B.push((()=>ie(t,"field",i))),{c(){re(t.$$.fragment)},m(e,n){se(t,e,n),o=!0},p(e,o){const i={};4&o&&(i.placeholder=e[2].placeholder),!n&&1&o&&(n=!0,i.field=e[0],H((()=>n=!1))),t.$set(i)},i(e){o||(Q(t.$$.fragment,e),o=!0)},o(e){ee(t.$$.fragment,e),o=!1},d(e){le(t,e)}}}function To(e){let t,n,o,i,r,s,l,a,c,d,u,f,p,y,$,b,k,D,L,A,O,_,T,C,S,M,j;i=new xo({});const N=[_o,Oo,Ao,Lo],W=[];function I(e,t){return"text"===e[2].type?0:"select"===e[2].type?1:"autocomplete-select"===e[2].type?2:3}function F(t){e[8](t)}s=I(e),l=W[s]=N[s](e),d=new Do({});let P={};function R(t){e[9](t)}void 0!==e[0].negation&&(P.value=e[0].negation),f=new Fn({props:P}),B.push((()=>ie(f,"value",F)));let z={};function q(t){e[10](t)}void 0!==e[0].type&&(z.value=e[0].type),b=new to({props:z}),B.push((()=>ie(b,"value",R))),b.$on("change",e[4]);let Z={disabled:e[1]};return void 0!==e[0].junction&&(Z.value=e[0].junction),L=new Kn({props:Z}),B.push((()=>ie(L,"value",q))),C=new Mn({}),{c(){t=v("div"),n=v("div"),o=v("i"),re(i.$$.fragment),r=w(),l.c(),a=w(),c=v("i"),re(d.$$.fragment),u=w(),re(f.$$.fragment),y=w(),$=v("div"),re(b.$$.fragment),D=w(),re(L.$$.fragment),O=w(),_=v("div"),T=v("button"),re(C.$$.fragment),E(o,"class","drag-handle left-drag-handle svelte-urou8j"),E(n,"class","input svelte-urou8j"),E(c,"class","drag-handle center-drag-handle svelte-urou8j"),E($,"class","search-adjustment svelte-urou8j"),E(T,"type","button"),E(T,"class","remove-field svelte-urou8j"),E(_,"class","remove-field-container svelte-urou8j"),E(t,"class","composite-field svelte-urou8j")},m(l,p){g(l,t,p),h(t,n),h(n,o),se(i,o,null),h(n,r),W[s].m(n,null),h(t,a),h(t,c),se(d,c,null),h(t,u),se(f,t,null),h(t,y),h(t,$),se(b,$,null),h($,D),se(L,$,null),h(t,O),h(t,_),h(_,T),se(C,T,null),S=!0,M||(j=x(T,"click",e[3]),M=!0)},p(e,[t]){let o=s;s=I(e),s===o?W[s].p(e,t):(J(),ee(W[o],1,1,(()=>{W[o]=null})),K(),l=W[s],l?l.p(e,t):(l=W[s]=N[s](e),l.c()),Q(l,1),l.m(n,null));const i={};!p&&1&t&&(p=!0,i.value=e[0].negation,H((()=>p=!1))),f.$set(i);const r={};!k&&1&t&&(k=!0,r.value=e[0].type,H((()=>k=!1))),b.$set(r);const a={};2&t&&(a.disabled=e[1]),!A&&1&t&&(A=!0,a.value=e[0].junction,H((()=>A=!1))),L.$set(a)},i(e){S||(Q(i.$$.fragment,e),Q(l),Q(d.$$.fragment,e),Q(f.$$.fragment,e),Q(b.$$.fragment,e),Q(L.$$.fragment,e),Q(C.$$.fragment,e),S=!0)},o(e){ee(i.$$.fragment,e),ee(l),ee(d.$$.fragment,e),ee(f.$$.fragment,e),ee(b.$$.fragment,e),ee(L.$$.fragment,e),ee(C.$$.fragment,e),S=!1},d(e){e&&m(t),le(i),W[s].d(),le(d),le(f),le(b),le(L),le(C),M=!1,j()}}}function Co(e,t,n){let o;const i=N();let{field:r}=t,{isLast:s=!1}=t;return e.$$set=e=>{"field"in e&&n(0,r=e.field),"isLast"in e&&n(1,s=e.isLast)},e.$$.update=()=>{1&e.$$.dirty&&n(2,o=fe.definitions[r.type])},[r,s,o,()=>i("remove"),()=>{"text"!==o.type&&n(0,r.value=null,r)},function(e){r=e,n(0,r)},function(e){r=e,n(0,r)},function(e){r=e,n(0,r)},function(t){e.$$.not_equal(r.negation,t)&&(r.negation=t,n(0,r))},function(t){e.$$.not_equal(r.type,t)&&(r.type=t,n(0,r))},function(t){e.$$.not_equal(r.junction,t)&&(r.junction=t,n(0,r))}]}class So extends ce{constructor(e){super(),ae(this,e,Co,To,s,{field:0,isLast:1})}}function Mo(e,t,n){const o=e.slice();return o[8]=t[n],o[9]=t,o[10]=n,o}function jo(t,n){let o,i,r,s,l,a,c=e;function d(e){n[6](e,n[8],n[9],n[10])}let u={isLast:n[10]==n[0].length-1};return void 0!==n[8]&&(u.field=n[8]),i=new So({props:u}),B.push((()=>ie(i,"field",d))),i.$on("remove",(function(){return n[7](n[10])})),{key:t,first:null,c(){o=v("div"),re(i.$$.fragment),s=w(),this.first=o},m(e,t){g(e,o,t),se(i,o,null),h(o,s),a=!0},p(e,t){n=e;const o={};1&t&&(o.isLast=n[10]==n[0].length-1),!r&&1&t&&(r=!0,o.field=n[8],H((()=>r=!1))),i.$set(o)},r(){l=o.getBoundingClientRect()},f(){M(o),c()},a(){c(),c=S(o,l,Tn,{duration:300})},i(e){a||(Q(i.$$.fragment,e),a=!0)},o(e){ee(i.$$.fragment,e),a=!1},d(e){e&&m(o),le(i)}}}function No(t){let n,o,s,l,a,c,d,u,f=[],p=new Map,y=t[0];const $=e=>e[8];for(let e=0;e<y.length;e+=1){let n=Mo(t,y,e),o=$(n);p.set(o,f[e]=jo(o,n))}return{c(){n=v("div"),o=v("div");for(let e=0;e<f.length;e+=1)f[e].c();l=w(),a=v("button"),a.innerHTML="<strong>+</strong>\n    Add search field",E(a,"class","add-field svelte-2l1e64"),E(a,"type","button"),E(n,"class","composite-form")},m(i,p){g(i,n,p),h(n,o);for(let e=0;e<f.length;e+=1)f[e].m(o,null);var m;h(n,l),h(n,a),c=!0,d||(u=[(m=s=An.call(null,o,{items:t[0],flipDurationMs:Wo,dropTargetStyle:t[1]}),m&&r(m.destroy)?m.destroy:e),x(o,"consider",t[4]),x(o,"finalize",t[5]),x(a,"click",t[2])],d=!0)},p(e,[t]){if(9&t){y=e[0],J();for(let e=0;e<f.length;e+=1)f[e].r();f=oe(f,t,$,1,e,y,p,o,ne,jo,null,Mo);for(let e=0;e<f.length;e+=1)f[e].a();K()}s&&r(s.update)&&1&t&&s.update.call(null,{items:e[0],flipDurationMs:Wo,dropTargetStyle:e[1]})},i(e){if(!c){for(let e=0;e<y.length;e+=1)Q(f[e]);c=!0}},o(e){for(let e=0;e<f.length;e+=1)ee(f[e]);c=!1},d(e){e&&m(n);for(let e=0;e<f.length;e+=1)f[e].d();d=!1,i(u)}}}const Wo=300;function Bo(e,t,n){let o;l(e,he,(e=>n(0,o=e)));const i=e=>{he.remove(e),o.length||he.addDefault()};return[o,{},()=>{he.addDefault()},i,function(e){a(he,o=e.detail.items,o)},function(e){a(he,o=e.detail.items,o)},function(e,t,n,i){n[i]=e,he.set(o)},e=>i(e)]}class Io extends ce{constructor(e){super(),ae(this,e,Bo,No,s,{})}}function Fo(e){let t,n;return t=new Io({}),{c(){re(t.$$.fragment)},m(e,o){se(t,e,o),n=!0},i(e){n||(Q(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(e){le(t,e)}}}function Po(e){let t,n,o=e[0]&&Fo();return{c(){o&&o.c(),t=b()},m(e,i){o&&o.m(e,i),g(e,t,i),n=!0},p(e,[n]){e[0]?o?1&n&&Q(o,1):(o=Fo(),o.c(),Q(o,1),o.m(t.parentNode,t)):o&&(J(),ee(o,1,1,(()=>{o=null})),K())},i(e){n||(Q(o),n=!0)},o(e){ee(o),n=!1},d(e){o&&o.d(e),e&&m(t)}}}function Ro(e,t,n){let o;l(e,pe,(e=>n(0,o=e)));let{definitions:i={}}=t,{order:r=[]}=t;return fe.setDefinitions(i,r),e.$$set=e=>{"definitions"in e&&n(1,i=e.definitions),"order"in e&&n(2,r=e.order)},[o,i,r]}return{App:class extends ce{constructor(e){super(),ae(this,e,Ro,Po,s,{definitions:1,order:2})}},stores:me}}();

ckan.module("composite-search", function ($) {
    "use strict";
    var EVENT_TOGGLE = "composite-search:toggle";
    var App = CompositeSearch.App;
    var stores = CompositeSearch.stores;

    return {
        options: {
            prefix: "ext_composite_",
            config: null,
            urlInit: false,
            enabled: false,
        },
        initialize: function () {
            var config = this.options.config || {};
            this.app = new App({
                target: this.el[0],
                props: {
                    definitions: config.definitions,
                    order: config.order
                },
            });
            stores.prefix.set(this.options.prefix);
            stores.formData.addDefault();

            this.sandbox.subscribe(EVENT_TOGGLE, this._onToggle);
            this.options.urlInit && this._initFromUrl();
            this.options.enabled && stores.state.enable();
        },
        teardown: function () {
            this.sandbox.unsubscribe(EVENT_TOGGLE, this._onToggle);
        },

        _initFromUrl: function () {
            var self = this;
            var stacks = window.location.search
                .slice(1)
                .split("&")
                .filter(function (str) {
                    return str.indexOf(self.options.prefix) === 0;
                }).map(function(str) {
                    var pair = str.trim().split('=');
                    return [pair[0].slice(self.options.prefix.length), pair[1]];
                }).reduce(function(data, pair){
                    if (!data[pair[0]]) {
                        data[pair[0]] = [];
                    }

                    // don't forget to handle spaces encoded as `+` instead of `%20`
                    data[pair[0]].push(decodeURIComponent(pair[1].replace(/\+/g, " ")));
                    return data;
                }, {});
            var keys = Object.keys(stacks);
            var longest = Math.max.apply(null, keys.map(function(k) { return stacks[k].length; }));
            var data = [];
            for (var i = 0; i < longest; ++i) {
                data.push(keys.reduce(function(record, key){
                    record[key] = stacks[key][i] || '';
                    return record;
                }, {}));
            }
            if (data.length) {
                stores.formData.set(data);
            }

        },
        _onToggle: function (state) {
            state ? stores.state.enable() : stores.state.disable();
        },
    };
});
